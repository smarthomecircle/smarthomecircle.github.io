{"pageProps":{"post":{"mdxSource":"var Component=(()=>{var p=Object.create;var s=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty;var o=r=>s(r,\"__esModule\",{value:!0});var b=(r,i)=>()=>(i||r((i={exports:{}}).exports,i),i.exports),w=(r,i)=>{o(r);for(var t in i)s(r,t,{get:i[t],enumerable:!0})},A=(r,i,t)=>{if(i&&typeof i==\"object\"||typeof i==\"function\")for(let n of u(i))!f.call(r,n)&&n!==\"default\"&&s(r,n,{get:()=>i[n],enumerable:!(t=m(i,n))||t.enumerable});return r},y=r=>A(o(s(r!=null?p(g(r)):{},\"default\",r&&r.__esModule&&\"default\"in r?{get:()=>r.default,enumerable:!0}:{value:r,enumerable:!0})),r);var d=b((M,c)=>{c.exports=_jsx_runtime});var v={};w(v,{default:()=>k,frontmatter:()=>S});var e=y(d()),S={title:\"Create a Network-Attached Storage (NAS) with Raspberry Pi Compute Module 5 and NVMe to SATA Adapter\",author:\"Amrut Prabhu\",categories:\"\",tags:[\"Raspberry Pi\",\"CM5\",\"Compute Module\",\"Compute Module 5\",\"open media vault\",\"NAS\",\"Raid 5\"],\"photo-credits\":null,\"applaud-link\":\"2021/spring-boot-stream-kafka.json\",date:\"2025-02-13\",draft:!1,summary:\"Build a DIY NAS using Raspberry Pi Compute Module 5, NVMe to SATA adapter, and OpenMediaVault with RAID 5.\",imageUrl:\"/static/images/2024/diy-nas-cm5/cover.webp\",actualUrl:\"auto-generated\",customUrl:\"auto-generated\",youtubeLink:\"https://www.youtube.com/embed/5J-es6-DBU4\"};function N(r={}){let{wrapper:i}=r.components||{};return i?(0,e.jsx)(i,Object.assign({},r,{children:(0,e.jsx)(t,{})})):t();function t(){let n=Object.assign({p:\"p\",hr:\"hr\",h4:\"h4\",a:\"a\",span:\"span\",ol:\"ol\",li:\"li\",strong:\"strong\",div:\"div\",ul:\"ul\",code:\"code\",pre:\"pre\"},r.components),{TOCInline:l,Image:a}=n;return a||h(\"Image\",!0),l||h(\"TOCInline\",!0),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(l,{toc:r.toc,asDisclosure:!0}),`\n`,(0,e.jsx)(n.p,{children:\"In this guide, we\\u2019ll walk through the process of creating a DIY Network-Attached Storage (NAS) system using a Raspberry Pi Compute Module 5 (CM5) and an NVMe to SATA adapter.\"}),`\n`,(0,e.jsx)(n.p,{children:\"This adapter, equipped with the ASM1166 chip, supports six SATA connections, making it a versatile tool for this project. Let\\u2019s dive into the steps, challenges, and results.\"}),`\n`,(0,e.jsx)(n.hr,{}),`\n`,(0,e.jsxs)(n.h4,{id:\"components-used\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#components-used\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Components Used:\"]}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"Raspberry Pi Compute Module 5\"}),\": A compact yet powerful computing module.\"]}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(a,{alt:\"sata adapater\",src:\"/static/images/2024/diy-nas-cm5/cm5-front.webp\",width:\"250\",height:\"199\"})}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"AliExpress\"}),\" : \",(0,e.jsx)(n.a,{href:\"https://s.click.aliexpress.com/e/_DdzGQGd\",children:\"https://s.click.aliexpress.com/e/_DdzGQGd\"})]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"ThePiHut\"}),\" : \",(0,e.jsx)(n.a,{href:\"https://thepihut.com/products/raspberry-pi-compute-module-5\",children:\"https://thepihut.com/products/raspberry-pi-compute-module-5\"})]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"BerryBase\"}),\" : \",(0,e.jsx)(n.a,{href:\"https://www.berrybase.de/en/detail/019350e97c767050917125760299ebf0\",children:\"https://www.berrybase.de/en/detail/019350e97c767050917125760299ebf0\"})]}),`\n`]}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"NVMe to SATA Adapter\"}),\": Features the ASM1166 chip for connecting multiple SATA drives.\"]}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(a,{alt:\"sata adapater\",src:\"/static/images/2024/diy-nas-cm5/sata-adapter.webp\",width:\"233\",height:\"233\"})}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[\"Amazon EU:          \",(0,e.jsx)(n.a,{href:\"https://amzn.to/4fjHg8j\",children:\"https://amzn.to/4fjHg8j\"})]}),`\n`,(0,e.jsxs)(n.li,{children:[\"Amazon US:          \",(0,e.jsx)(n.a,{href:\"https://amzn.to/3Bm0QmD\",children:\"https://amzn.to/3Bm0QmD\"})]}),`\n`,(0,e.jsxs)(n.li,{children:[\"AliExpress  :          \",(0,e.jsx)(n.a,{href:\"https://s.click.aliexpress.com/e/_olOqrGf\",children:\"https://s.click.aliexpress.com/e/_olOqrGf\"})]}),`\n`]}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"Acrylic HDD Rack Mount\"}),\": For neatly organizing hard drives.\"]}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(a,{alt:\"hdd rack\",src:\"/static/images/2024/diy-nas-cm5/hdd-rack.webp\",width:\"233\",height:\"233\"})}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[\"Amazon EU:          \",(0,e.jsx)(n.a,{href:\"https://amzn.to/3BuOMPY\",children:\"https://amzn.to/3BuOMPY\"})]}),`\n`,(0,e.jsxs)(n.li,{children:[\"Amazon US:          \",(0,e.jsx)(n.a,{href:\"https://amzn.to/4iFN3rF\",children:\"https://amzn.to/4iFN3rF\"})]}),`\n`,(0,e.jsxs)(n.li,{children:[\"AliExpress  :          \",(0,e.jsx)(n.a,{href:\"https://s.click.aliexpress.com/e/_olEubxz\",children:\"https://s.click.aliexpress.com/e/_olEubxz\"})]}),`\n`]}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"SATA Power Supply Cable\"}),\": Powered by a DC adapter (7.5A, 12V).\"]}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(a,{alt:\"sata power supply\",src:\"/static/images/2024/diy-nas-cm5/sata-power.webp\",width:\"233\",height:\"233\"})}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[\"AliExpress:           \",(0,e.jsx)(n.a,{href:\"https://s.click.aliexpress.com/e/_ooaEC11\",children:\"https://s.click.aliexpress.com/e/_ooaEC11\"})]}),`\n`]}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"Hard Drives\"}),\": Used for creating the storage array.\"]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[\"Amazon EU:        \",(0,e.jsx)(n.a,{href:\"https://amzn.to/3OZOzHs\",children:\"https://amzn.to/3OZOzHs\"})]}),`\n`,(0,e.jsxs)(n.li,{children:[\"Amazon US:        \",(0,e.jsx)(n.a,{href:\"https://amzn.to/4ghjE5E\",children:\"https://amzn.to/4ghjE5E\"})]}),`\n`]}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"OpenMediaVault (OMV)\"}),\": Software for managing NAS.\"]}),`\n`]}),`\n`]}),`\n`,(0,e.jsx)(n.hr,{}),`\n`,(0,e.jsxs)(n.h4,{id:\"installing-the-os-and-configurations\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#installing-the-os-and-configurations\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Installing the OS and Configurations\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"I installed Raspberry Pi OS Lite on the Compute Module 5. This OS is lightweight and ideal for running OpenMediaVault. (A detailed video guide on flashing the OS on the CM5 with eMMC storage is linked \",(0,e.jsx)(n.a,{href:\"https://smarthomecircle.com/how-to-install-os-on-raspberry-pi-compute-module-5-emmc-storage\",children:\"here\"}),\")\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"During the setup, I encountered an error related to the AHCI controller. After \",(0,e.jsx)(n.a,{href:\"https://github.com/raspberrypi/linux/issues/6214#issuecomment-2246811573\",children:\"some research\"}),\", I added the following to load the required overlays in the \",(0,e.jsx)(n.code,{children:\"config.txt\"}),\" file and rebooted the system.\"]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-properties\",children:(0,e.jsxs)(n.code,{className:\"language-properties code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token attr-name\",children:\"[all]\"}),\" \",(0,e.jsx)(n.span,{className:\"token attr-value\",children:\" \"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# dtparam=pciex1  \"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# dtparam=pciex1_gen=3  \"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token attr-name\",children:\"dtparam\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token attr-value\",children:\"pcie-32bit-dma-pi5  \"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token attr-name\",children:\"dtoverlay\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token attr-value\",children:\"pciex1-compat-pi5,no-mip\"}),`\n`]})]})}),`\n`,(0,e.jsx)(n.p,{children:\"This resolved the issue, and the drives were successfully recognized.\"}),`\n`,(0,e.jsx)(n.hr,{}),`\n`,(0,e.jsxs)(n.h4,{id:\"set-up-openmediavault-and-raid-5\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#set-up-openmediavault-and-raid-5\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Set Up OpenMediaVault and RAID 5\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"I have a detailed guide to setup Open Media Vault on a Raspberry Pi 5 \",(0,e.jsx)(n.a,{href:\"https://smarthomecircle.com/create-nas-with-raspberry-pi-5\",children:\"here\"})]}),`\n`,(0,e.jsx)(n.p,{children:\"With OpenMediaVault installed, I accessed its UI to confirm the drives were detected. Using the multiple device plugin, I formatted the drives and set up RAID 5 for redundancy and performance.\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"RAID 5 allowed me to combine multiple drives into a single array while safeguarding data against single-drive failures. For detailed instructions, check out my video on setting up \",(0,e.jsx)(n.a,{href:\"https://youtu.be/0AVOghLYEu8\",children:\"OpenMediaVault and RAID 5\"}),\".\"]}),`\n`,(0,e.jsx)(n.hr,{}),`\n`,(0,e.jsxs)(n.h4,{id:\"performance-testing\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#performance-testing\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Performance Testing\"]}),`\n`,(0,e.jsx)(n.p,{children:\"After exposing the NAS via SMB services, I tested the setup by transferring a large file over a LAN connection. The results were impressive:\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"Using the onboard Ethernet: ~110 MB/s.\"}),`\n`,(0,e.jsx)(n.li,{children:\"With a 2.5 Gbps USB-to-Ethernet adapter: 130\\u2013140 MB/s.\"}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"While these speeds are solid for hard drives, my SSD-based NAS setup achieved faster speeds of ~200 MB/s.\"}),`\n`,(0,e.jsx)(n.hr,{}),`\n`,(0,e.jsxs)(n.h4,{id:\"power-consumption\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#power-consumption\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Power Consumption\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Power consumption for the HDD-based NAS was measured:\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"Idle\"}),\": ~21W.\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"Peak Load\"}),\": ~34W.\"]}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"In comparison, my SSD-based NAS consumed only ~9W at peak load, making it more energy-efficient for daily use. I plan to use the HDD NAS as a backup solution, automating it to replicate data from the SSD NAS and shut down afterward. This approach minimizes energy use and wear on the drives.\"}),`\n`,(0,e.jsx)(n.hr,{}),`\n`,(0,e.jsxs)(n.h4,{id:\"challenges-and-solutions\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#challenges-and-solutions\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Challenges and Solutions\"]}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"NVMe to SATA Adapter Durability\"}),\": The adapter is fragile, requiring careful handling when connecting/disconnecting SATA cables.\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"Heat Generation\"}),\": Hard drives generate significant heat. A fan will be added to improve cooling, albeit at the cost of higher power consumption.\"]}),`\n`]}),`\n`,(0,e.jsx)(n.hr,{}),`\n`,(0,e.jsxs)(n.h4,{id:\"conclusion\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#conclusion\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Conclusion\"]}),`\n`,(0,e.jsx)(n.p,{children:\"This DIY NAS setup demonstrates the potential of the Raspberry Pi Compute Module 5 and the NVMe to SATA adapter. While it\\u2019s not as energy-efficient as SSD-based solutions, it offers a reliable backup system with decent performance.\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"For more innovative projects, subscribe to \",(0,e.jsx)(n.a,{href:\"https://www.youtube.com/@SmartHomeCircle\",children:\"my channel\"}),\".\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"If you\\u2019d like to support my work, consider \",(0,e.jsx)(n.a,{href:\"https://www.buymeacoffee.com/amrutprabhu\",children:\"buying me a coffee\"}),\" or contributing via \",(0,e.jsx)(n.a,{href:\"https://patreon.com/AmrutPrabhu\",children:\"Patreon\"}),\".\"]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://smarthomecircle.com/create-nas-with-raspberry-pi-5\",children:(0,e.jsx)(n.strong,{children:\"Create a NAS with Raspberry Pi 5\"})})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://smarthomecircle.com/radxa-x4-alternative-to-raspberry-pi-5\",children:(0,e.jsx)(n.strong,{children:\"Radxa X4: 60$ Powerful Atlernative to Raspberry Pi 5\"})})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://smarthomecircle.com/how-to-install-os-on-raspberry-pi-compute-module-5-emmc-storage\",children:(0,e.jsx)(n.strong,{children:\"Install OS on Raspberry Pi Compute Module 5 with eMMC Storage\"})})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://smarthomecircle.com/Orange-pi-5-max-a-powerful-successor-to-orange-pi-5-pro\",children:(0,e.jsx)(n.strong,{children:\"Orange Pi 5 MAX: A Powerful Successor to the Orange Pi 5 Pro\"})})}),`\n`]})]})}}var k=N;function h(r,i){throw new Error(\"Expected \"+(i?\"component\":\"object\")+\" `\"+r+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return v;})();\n;return Component;","toc":[{"value":"Components Used:","url":"#components-used","depth":4},{"value":"Installing the OS and Configurations","url":"#installing-the-os-and-configurations","depth":4},{"value":"Set Up OpenMediaVault and RAID 5","url":"#set-up-openmediavault-and-raid-5","depth":4},{"value":"Performance Testing","url":"#performance-testing","depth":4},{"value":"Power Consumption","url":"#power-consumption","depth":4},{"value":"Challenges and Solutions","url":"#challenges-and-solutions","depth":4},{"value":"Conclusion","url":"#conclusion","depth":4}],"frontMatter":{"readingTime":{"text":"4 min read","minutes":3.8,"time":228000,"words":760},"slug":"2025/create-diy-nas-with-raspberry-pi-compute-module-5-raid-5","fileName":"2025/create-diy-nas-with-raspberry-pi-compute-module-5-raid-5.md","title":"Create a Network-Attached Storage (NAS) with Raspberry Pi Compute Module 5 and NVMe to SATA Adapter","author":"Amrut Prabhu","categories":"","tags":["Raspberry Pi","CM5","Compute Module","Compute Module 5","open media vault","NAS","Raid 5"],"photo-credits":null,"applaud-link":"2021/spring-boot-stream-kafka.json","date":"2025-02-13T00:00:00.000Z","draft":false,"summary":"Build a DIY NAS using Raspberry Pi Compute Module 5, NVMe to SATA adapter, and OpenMediaVault with RAID 5.","imageUrl":"/static/images/2024/diy-nas-cm5/cover.webp","actualUrl":"2025/create-diy-nas-with-raspberry-pi-compute-module-5-raid-5","customUrl":"create-diy-nas-with-raspberry-pi-compute-module-5-raid-5","youtubeLink":"https://www.youtube.com/embed/5J-es6-DBU4"}},"authorDetails":[{"readingTime":{"text":"1 min read","minutes":0.97,"time":58200,"words":194},"slug":["default"],"fileName":"default.md","name":"Amrut Prabhu","avatar":"/static/images/avatar-small.jpg","avatarBig":"/static/images/avatar-big.jpg","occupation":"","company":"","email":"contactsmarthomecircle@gmail.com","twitter":"https://twitter.com/smarthomecircle","linkedin":"","github":"","youtube":"https://www.youtube.com/@SmartHomeCircle","customUrl":"default","actualUrl":"default","date":null}],"prev":{"title":"How to Install OS on Raspberry Pi Compute Module 5 with eMMC Storage","author":"Amrut Prabhu","categories":"","tags":["Raspberry Pi","CM5","Compute Module","Compute Module 5","SBC","Linux"],"photo-credits":null,"applaud-link":"2021/spring-boot-stream-kafka.json","date":"2024-12-19T00:00:00.000Z","draft":false,"summary":"Step by step guide to install Raspberry Pi OS on Raspberry Pi Compute Module 5 with eMMC Storage ","imageUrl":"/static/images/2024/os-cm5-emmc/cover.webp","actualUrl":"2024/how-to-install-os-on-raspberry-pi-compute-module-5-emmc-storage","customUrl":"how-to-install-os-on-raspberry-pi-compute-module-5-emmc-storage","youtubeLink":"https://www.youtube.com/embed/SWv-WYlHJWQ","slug":"how-to-install-os-on-raspberry-pi-compute-module-5-emmc-storage"},"next":null},"__N_SSG":true}