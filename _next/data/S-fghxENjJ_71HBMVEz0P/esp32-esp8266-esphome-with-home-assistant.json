{"pageProps":{"post":{"mdxSource":"var Component=(()=>{var r=Object.create;var o=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var c=i=>o(i,\"__esModule\",{value:!0});var g=(i,s)=>()=>(s||i((s={exports:{}}).exports,s),s.exports),w=(i,s)=>{c(i);for(var a in s)o(i,a,{get:s[a],enumerable:!0})},k=(i,s,a)=>{if(s&&typeof s==\"object\"||typeof s==\"function\")for(let n of p(s))!u.call(i,n)&&n!==\"default\"&&o(i,n,{get:()=>s[n],enumerable:!(a=d(s,n))||a.enumerable});return i},N=i=>k(c(o(i!=null?r(m(i)):{},\"default\",i&&i.__esModule&&\"default\"in i?{get:()=>i.default,enumerable:!0}:{value:i,enumerable:!0})),i);var h=g((E,l)=>{l.exports=_jsx_runtime});var b={};w(b,{default:()=>S,frontmatter:()=>f});var e=N(h()),f={title:\"How I Setup ESP32/ESP8266 With ESP Home and Home Assistant OS And Container - Step By Step Guide\",author:\"Amrut Prabhu\",categories:\"\",tags:[\"Home Assistant Container\",\"ESP32\",\"ESP8266\",\"Home Assistant\",\"Ubuntu\",\"Raspberry Pi\",\"docker compose\"],\"photo-credits\":null,\"applaud-link\":\"2021/spring-boot-stream-kafka.json\",date:\"2023-07-20\",draft:!1,summary:\"In this article we will look into how we can setup ESP32 / ESP8266 with ESP Home and Home Assistant\",imageUrl:\"/static/images/2023/esp32-esp8266-esphome-with-home-assistant/cover.png\",actualUrl:\"auto-generated\",customUrl:\"auto-generated\",youtubeLink:\"https://www.youtube.com/embed/S6If_kj9MCM\"};function y(i={}){let{wrapper:s}=i.components||{};return s?(0,e.jsx)(s,Object.assign({},i,{children:(0,e.jsx)(a,{})})):a();function a(){let n=Object.assign({h2:\"h2\",a:\"a\",span:\"span\",ul:\"ul\",li:\"li\",p:\"p\",div:\"div\",code:\"code\",pre:\"pre\"},i.components),{Image:t}=n;return t||v(\"Image\",!0),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.h2,{id:\"pre-requisites\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#pre-requisites\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Pre-Requisites\"]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"Home Assistant OS Or Home Assistant Container up and running.\"}),`\n`,(0,e.jsx)(n.li,{children:\"ESP32/ESP8266 Device.\"}),`\n`,(0,e.jsx)(n.li,{children:\"SSH access to the device Or Terminal on the device.\"}),`\n`]}),`\n`,(0,e.jsxs)(n.p,{children:[\"If you are installing Home Assistant on Raspberry PI, you can refer to the article \",(0,e.jsx)(n.a,{href:\"https://smarthomecircle.com/connect-wifi-on-home-assistant-on-startup\",children:\"here\"}),\" where I explain how to install Ubuntu on raspberry pi.\"]}),`\n`,(0,e.jsxs)(n.h2,{id:\"installing-esp-home-in-home-assistant-os\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#installing-esp-home-in-home-assistant-os\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Installing ESP Home In Home Assistant OS\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Click on Settings on the left panel then click on Addons\"}),`\n`,(0,e.jsx)(n.p,{children:\"Then, click on the \\u201CAdd-On Store\\u201D in the bottom right-hand corner\"}),`\n`,(0,e.jsx)(n.p,{children:\"Select ESPHome\"}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(t,{alt:\"\",src:\"/static/images/2023/esp32-esp8266-esphome-with-home-assistant/1-esphome.png\",width:\"1708\",height:\"932\"})}),`\n`,(0,e.jsx)(n.p,{children:\"Click on Install and then \\u201CShow in sidebar\\u201D\"}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(t,{alt:\"\",src:\"/static/images/2023/esp32-esp8266-esphome-with-home-assistant/2-esphome-addon.png\",width:\"1184\",height:\"744\"})}),`\n`,(0,e.jsxs)(n.h2,{id:\"setting-up-esp-home-container-with-home-assistant-container\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#setting-up-esp-home-container-with-home-assistant-container\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Setting Up ESP Home Container with Home Assistant Container\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Create a file with the name \",(0,e.jsx)(n.code,{children:\"docker-compose.yaml\"}),\" and add the following config\"]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"language-yaml code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"version\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'3'\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"services\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"esphome\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"image\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" ghcr.io/esphome/esphome\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`latest\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"volumes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" ./config\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"/config\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`rw\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"# Use local time for logging timestamps\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" /etc/localtime\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"/etc/localtime\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`ro\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"network_mode\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` host\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"restart\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` always\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"All the configs will be stored in the current directory in the \",(0,e.jsx)(n.code,{children:\"config\"}),\" folder.\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Next, start the ESP Home container using Docker with the following Command\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-shell\",children:(0,e.jsx)(n.code,{className:\"language-shell code-highlight\",children:(0,e.jsx)(n.span,{className:\"code-line\",children:`docker compose up -d\n`})})}),`\n`,(0,e.jsx)(n.p,{children:\"Make sure you are running this command in the same directory as the docker compose file.\"}),`\n`,(0,e.jsx)(n.p,{children:\"This will start the container and then make it a background process.\"}),`\n`,(0,e.jsx)(n.p,{children:\"You can check the logs of the container using the following command.\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-shell\",children:(0,e.jsx)(n.code,{className:\"language-shell code-highlight\",children:(0,e.jsx)(n.span,{className:\"code-line\",children:`docker compose logs -f\n`})})}),`\n`,(0,e.jsxs)(n.h2,{id:\"installing-configuration-to-esp32-with-esp-home\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#installing-configuration-to-esp32-with-esp-home\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Installing Configuration to ESP32 with ESP Home\"]}),`\n`,(0,e.jsx)(n.p,{children:\"We will be adding a Wifi signal strength sensor and HTTP server to the ESP32 device.\"}),`\n`,(0,e.jsx)(n.p,{children:\"In ESP Home, click on \\u201CNew Device\\u201D, then provide a name for your device.\"}),`\n`,(0,e.jsx)(n.p,{children:\"If you are doing it for the first time, it will ask you for your wifi credentials.\"}),`\n`,(0,e.jsx)(n.p,{children:\"Then select ESP32 or ESP8266 depending on your board.\"}),`\n`,(0,e.jsx)(n.p,{children:\"Next, We need to edit the configuration file.\"}),`\n`,(0,e.jsx)(n.p,{children:\"Add the following to the end of the file.\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"language-yaml code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"sensor\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"platform\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` wifi_signal  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"WiFi Signal Sensor\"'}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"update_interval\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` 1s  \n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`  \n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"web_server\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"port\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"80\"}),`\n`]})]})}),`\n`,(0,e.jsx)(n.p,{children:\"Your file would look something like this.\"}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(t,{alt:\"\",src:\"/static/images/2023/esp32-esp8266-esphome-with-home-assistant/3-esp32-configuration.png\",width:\"1316\",height:\"1506\"})}),`\n`,(0,e.jsx)(n.p,{children:\"Once you are done, click on save and then click on the install option.\"}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(t,{alt:\"\",src:\"/static/images/2023/esp32-esp8266-esphome-with-home-assistant/4-manual-download.png\",width:\"1128\",height:\"966\"})}),`\n`,(0,e.jsx)(n.p,{children:\"Now, select \\u201CManual Download\\u201D then click on \\u201CModern Format\\u201D and wait for it to start compiling.\"}),`\n`,(0,e.jsx)(n.p,{children:\"Once it's completed, the generated file will be downloaded or you can click on the download button.\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"Now, go to \",(0,e.jsx)(n.a,{href:\"https://web.esphome.io\",children:\"https://web.esphome.io\"}),\" , connect your ESP32 to the USB port, and click on connect\"]}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(t,{alt:\"\",src:\"/static/images/2023/esp32-esp8266-esphome-with-home-assistant/5-web-esphome.png\",width:\"1366\",height:\"580\"})}),`\n`,(0,e.jsx)(n.p,{children:\"Once presented with a window, select the \\u201CUSB Single Serial\\u201D\"}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(t,{alt:\"\",src:\"/static/images/2023/esp32-esp8266-esphome-with-home-assistant/6-select-web-esphome.png\",width:\"1368\",height:\"912\"})}),`\n`,(0,e.jsx)(n.p,{children:\"Next, click on the \\u201CInstall\\u201D Option and select the file which we just downloaded previously, and then click Install.\"}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(t,{alt:\"\",src:\"/static/images/2023/esp32-esp8266-esphome-with-home-assistant/7-install-web-esphome.png\",width:\"832\",height:\"536\"})}),`\n`,(0,e.jsx)(n.p,{children:\"Finally when you see connecting progress, press and hold the \\u201CBoot\\u201D button on your ESP32 until you see the Installing progress bar.\"}),`\n`,(0,e.jsx)(n.p,{children:\"Once finished, unplug the device and connect it again and wait for 1\\u20132 mins for it to connect to your Wifi Network.\"}),`\n`,(0,e.jsx)(n.p,{children:\"You will now have to search the IP address of the device in your router or use some network tool.\"}),`\n`,(0,e.jsx)(n.p,{children:\"Once you figured out the IP address of the device simply paste the IP in the browser and you will see the ESP32 device webpage from the HTTP Server we added.\"}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(t,{alt:\"\",src:\"/static/images/2023/esp32-esp8266-esphome-with-home-assistant/8-esp32-http-server.png\",width:\"1494\",height:\"608\"})}),`\n`,(0,e.jsxs)(n.h2,{id:\"connecting-esp32-with-home-assistant\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#connecting-esp32-with-home-assistant\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Connecting ESP32 with Home Assistant\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Navigate to settings in Home Assistant, then click on devices, then click on \\u201CAdd integration\\u201D in the bottom right corner\"}),`\n`,(0,e.jsx)(n.p,{children:\"Then search for ESPHome\"}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(t,{alt:\"\",src:\"/static/images/2023/esp32-esp8266-esphome-with-home-assistant/9-esphome.png\",width:\"1642\",height:\"1088\"})}),`\n`,(0,e.jsx)(n.p,{children:\"Now specify the IP address and keep the port as 6053 and then click submit. No need to change the port.\"}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(t,{alt:\"\",src:\"/static/images/2023/esp32-esp8266-esphome-with-home-assistant/10-esp32-home-assistant-setup.png\",width:\"1174\",height:\"930\"})}),`\n`,(0,e.jsx)(n.p,{children:\"Now, if it asks you for an encryption key, then you will find this in the configuration file in the ESPHome.\"}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(t,{alt:\"\",src:\"/static/images/2023/esp32-esp8266-esphome-with-home-assistant/11-encryption-key.png\",width:\"1228\",height:\"1500\"})}),`\n`,(0,e.jsx)(n.p,{children:\"With this, you are done.\"}),`\n`,(0,e.jsx)(n.p,{children:\"In the ESPHome click on the devices\"}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(t,{alt:\"\",src:\"/static/images/2023/esp32-esp8266-esphome-with-home-assistant/11-esphome-homeassistant.png\",width:\"1438\",height:\"980\"})}),`\n`,(0,e.jsx)(n.p,{children:\"Here you will be able to see the ESP32 device.\"}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(t,{alt:\"\",src:\"/static/images/2023/esp32-esp8266-esphome-with-home-assistant/12-home-assistant-esp32-device.png\",width:\"1308\",height:\"1014\"})})]})}}var S=y;function v(i,s){throw new Error(\"Expected \"+(s?\"component\":\"object\")+\" `\"+i+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return b;})();\n;return Component;","toc":[{"value":"Pre-Requisites","url":"#pre-requisites","depth":2},{"value":"Installing ESP Home In Home Assistant OS","url":"#installing-esp-home-in-home-assistant-os","depth":2},{"value":"Setting Up ESP Home Container with Home Assistant Container","url":"#setting-up-esp-home-container-with-home-assistant-container","depth":2},{"value":"Installing Configuration to ESP32 with ESP Home","url":"#installing-configuration-to-esp32-with-esp-home","depth":2},{"value":"Connecting ESP32 with Home Assistant","url":"#connecting-esp32-with-home-assistant","depth":2}],"frontMatter":{"readingTime":{"text":"4 min read","minutes":3.835,"time":230100,"words":767},"slug":"2023/esp32-esp8266-esphome-with-home-assistant","fileName":"2023/esp32-esp8266-esphome-with-home-assistant.md","title":"How I Setup ESP32/ESP8266 With ESP Home and Home Assistant OS And Container - Step By Step Guide","author":"Amrut Prabhu","categories":"","tags":["Home Assistant Container","ESP32","ESP8266","Home Assistant","Ubuntu","Raspberry Pi","docker compose"],"photo-credits":null,"applaud-link":"2021/spring-boot-stream-kafka.json","date":"2023-07-20T00:00:00.000Z","draft":false,"summary":"In this article we will look into how we can setup ESP32 / ESP8266 with ESP Home and Home Assistant","imageUrl":"/static/images/2023/esp32-esp8266-esphome-with-home-assistant/cover.png","actualUrl":"2023/esp32-esp8266-esphome-with-home-assistant","customUrl":"esp32-esp8266-esphome-with-home-assistant","youtubeLink":"https://www.youtube.com/embed/S6If_kj9MCM"}},"authorDetails":[{"readingTime":{"text":"1 min read","minutes":0.74,"time":44400,"words":148},"slug":["default"],"fileName":"default.md","name":"Amrut Prabhu","avatar":"/static/images/avatar-small.jpg","avatarBig":"/static/images/avatar-big.jpg","occupation":"","company":"","email":"SmartHomeCircle@gmail.com","twitter":"https://twitter.com/amrutprabhu42","linkedin":"","github":"","youtube":"https://www.youtube.com/@SmartHomeCircle","customUrl":"default","actualUrl":"default","date":null}],"prev":{"title":"How to Run Home Assistant Container with Docker","author":"Amrut Prabhu","categories":"","tags":["Home Assistant Container","Home Assistant","Ubuntu","Raspberry Pi","docker compose"],"photo-credits":null,"applaud-link":"2021/spring-boot-stream-kafka.json","date":"2023-06-29T00:00:00.000Z","draft":false,"summary":"In this article we will look into how we can run Home Assistant Container with Docker","imageUrl":"/static/images/2023/run-home-assistant-container/cover.png","actualUrl":"2023/run-home-assistant-container-with-docker","customUrl":"run-home-assistant-container-with-docker","youtubeLink":"https://www.youtube.com/embed/Cvjc66-mkFo","slug":"run-home-assistant-container-with-docker"},"next":null},"__N_SSG":true}