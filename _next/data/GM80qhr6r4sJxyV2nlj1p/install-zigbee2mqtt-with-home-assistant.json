{"pageProps":{"post":{"mdxSource":"var Component=(()=>{var p=Object.create;var c=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty;var o=a=>c(a,\"__esModule\",{value:!0});var N=(a,s)=>()=>(s||a((s={exports:{}}).exports,s),s.exports),b=(a,s)=>{o(a);for(var i in s)c(a,i,{get:s[i],enumerable:!0})},f=(a,s,i)=>{if(s&&typeof s==\"object\"||typeof s==\"function\")for(let n of u(s))!k.call(a,n)&&n!==\"default\"&&c(a,n,{get:()=>s[n],enumerable:!(i=m(s,n))||i.enumerable});return a},y=a=>f(o(c(a!=null?p(g(a)):{},\"default\",a&&a.__esModule&&\"default\"in a?{get:()=>a.default,enumerable:!0}:{value:a,enumerable:!0})),a);var d=N((Z,r)=>{r.exports=_jsx_runtime});var z={};b(z,{default:()=>q,frontmatter:()=>w});var e=y(d()),w={title:\"How to Setup Zigbee2Mqtt with Home Assistant\\u200A\\u2014\\u200AStep By Step Guide\",author:\"Amrut Prabhu\",categories:\"\",tags:[\"Zigbee\",\"Zigbee2mqtt\",\"Sonoff Dongle Plus\",\"MQTT\",\"Home Assistant\"],\"photo-credits\":null,\"applaud-link\":\"2021/spring-boot-stream-kafka.json\",date:\"2023-10-02\",draft:!1,summary:\"In this article, we will look at how you can set up a Zigbee2Mqtt with Home Assistant\",imageUrl:\"/static/images/2023/zigbee2mqtt-setup/cover.webp\",actualUrl:\"auto-generated\",customUrl:\"auto-generated\",youtubeLink:\"https://www.youtube.com/embed/nNLgCUFRNsk\"};function v(a={}){let{wrapper:s}=a.components||{};return s?(0,e.jsx)(s,Object.assign({},a,{children:(0,e.jsx)(i,{})})):i();function i(){let n=Object.assign({p:\"p\",h2:\"h2\",a:\"a\",span:\"span\",ol:\"ol\",li:\"li\",br:\"br\",ul:\"ul\",strong:\"strong\",img:\"img\",div:\"div\",pre:\"pre\",code:\"code\"},a.components),{TOCInline:l,Image:t}=n;return t||h(\"Image\",!0),l||h(\"TOCInline\",!0),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.p,{children:\"In this article, we will look at how you can set up a Zigbee2Mqtt with Home Assistant\"}),`\n`,(0,e.jsx)(l,{toc:a.toc,asDisclosure:!0}),`\n`,(0,e.jsxs)(n.h2,{id:\"requirements\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#requirements\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Requirements\"]}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[\"Home Assistant up and running.\",(0,e.jsx)(n.br,{}),`\n`,\"You can check \",(0,e.jsx)(n.a,{href:\"https://smarthomecircle.com/connect-wifi-on-home-assistant-on-startup\",children:\"this\"}),\" link to see how you can install it for the first time\"]}),`\n`,(0,e.jsxs)(n.li,{children:[\"MQTT Broker setup\",(0,e.jsx)(n.br,{}),`\n`,\"You can check \",(0,e.jsx)(n.a,{href:\"https://smarthomecircle.com/how-to-setup-mqtt-docker-container-with-home-assistant\",children:\"this\"}),\" link to set it up.\"]}),`\n`,(0,e.jsx)(n.li,{children:\"A Zigbee Adapter Coordinator\"}),`\n`]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\"https://amzn.to/456Yzp1\",children:(0,e.jsx)(n.strong,{children:\"Sonoff Zigbee 3.0 USB Dongle Plus\"})}),`\n`,(0,e.jsx)(n.a,{href:\"https://amzn.to/456Yzp1\",children:(0,e.jsx)(n.img,{src:\"/static/images/2023/sonoff-zigbee-3-dongle-home-assistant/sonoff-zigbee-3-dongle-plus-image.webp\",alt:\"Sonoff Zigbee 3.0 USB Dongle Plus\"})})]}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://amzn.to/456Yzp1\",children:(0,e.jsx)(n.strong,{children:\"Amazon\"})})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://s.click.aliexpress.com/e/_DemtGJ9\",children:(0,e.jsx)(n.strong,{children:\"Aliexpress\"})})}),`\n`]}),`\n`,(0,e.jsxs)(n.ol,{start:\"4\",children:[`\n`,(0,e.jsxs)(n.li,{children:[\"A Zigbee device.\",(0,e.jsx)(n.br,{}),`\n`,\"In our case, we will use a Zigbee plug.\"]}),`\n`]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\"https://s.click.aliexpress.com/e/_DchhTXp\",children:(0,e.jsx)(n.strong,{children:\"Zigbee Plug\"})}),`\n`,(0,e.jsx)(n.a,{href:\"https://s.click.aliexpress.com/e/_DchhTXp\",children:(0,e.jsx)(n.img,{src:\"/static/images/2023/sonoff-zigbee-3-dongle-home-assistant/zigbee-plug.webp\",alt:\"Zigbee Plug\"})})]}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://amzn.to/3ZFioSq\",children:(0,e.jsx)(n.strong,{children:\"Amazon\"})})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://s.click.aliexpress.com/e/_DchhTXp\",children:(0,e.jsx)(n.strong,{children:\"Aliexpress\"})})}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"There are two ways to set up Zigbee2Mqtt.\"}),`\n`,(0,e.jsx)(n.p,{children:\"As a Home Assistant add-on or run it as a Docker container.\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"setting-up-zigbee2mqtt-as-a-home-assistant-add-on\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#setting-up-zigbee2mqtt-as-a-home-assistant-add-on\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Setting Up Zigbee2Mqtt as a Home Assistant Add-On\"]}),`\n`,(0,e.jsx)(n.p,{children:\"To install Zigbee2Mqtt as a Home Assistant add-on, navigate to the \\u201CAdd-ons\\u201D in Home Assistant settings, then click on \\u201CAdd-on Store\\u201D in the bottom right-hand corner, then click on the 3 dots in the top right-hand corner and click \\u201CRepositories\\u201D\"}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(t,{alt:\"1-home-assistant-add-on\",src:\"/static/images/2023/zigbee2mqtt-setup/1-home-assistant-add-on.webp\",width:\"1140\",height:\"390\"})}),`\n`,(0,e.jsx)(n.p,{children:\"Now add the following repository URL and click \\u201CAdd\\u201D\"}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"code-highlight\",children:(0,e.jsx)(n.span,{className:\"code-line\",children:`https://github.com/zigbee2mqtt/hassio-zigbee2mqtt\n`})})}),`\n`,(0,e.jsx)(n.p,{children:\"Now, refresh the UI and you should be able to see Zigbee2Mqtt\"}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(t,{alt:\"2-zigbee2mqtt-install\",src:\"/static/images/2023/zigbee2mqtt-setup/2-zigbee2mqtt-install.webp\",width:\"816\",height:\"204\"})}),`\n`,(0,e.jsx)(n.p,{children:\"Click on this, and then click on \\u201CInstall\\u201D.\"}),`\n`,(0,e.jsx)(n.p,{children:\"After it is installed, we will have to provide it with some configuration.\"}),`\n`,(0,e.jsx)(n.p,{children:\"So now click on the configuration tab, and provide two configs: Your MQTT broker URL and Your Zigbee adapter\"}),`\n`,(0,e.jsx)(n.p,{children:\"You will have to provide the MQTT URL as below\"}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"code-highlight\",children:(0,e.jsx)(n.span,{className:\"code-line\",children:`url: mqtt:// <IP address of your MQTT broker> : 1883\n`})})}),`\n`,(0,e.jsx)(n.p,{children:\"If you are using the Home Assistant MQTT broker, provide your Home Assistant URL.\"}),`\n`,(0,e.jsx)(n.p,{children:\"Now to find this serial port value of our Zigbee USB Dongle, you must have SSH access to your Home Assistant.\"}),`\n`,(0,e.jsx)(n.p,{children:\"Once you SSH into Home Assistant, run the following command.\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-shell\",children:(0,e.jsx)(n.code,{className:\"language-shell code-highlight\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"ls\"}),\" \",(0,e.jsx)(n.span,{className:\"token parameter variable\",children:\"-l\"}),` /dev/serial/by-id\n`]})})}),`\n`,(0,e.jsx)(n.p,{children:\"Since I am using the Sonoff Zigbee Dongle E version, It shows me this.\"}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(t,{alt:\"3-search-adapter\",src:\"/static/images/2023/zigbee2mqtt-setup/3-search-adapter.webp\",width:\"1180\",height:\"174\"})}),`\n`,(0,e.jsxs)(n.p,{children:[\"Now copy value \",(0,e.jsx)(n.code,{children:\"ttyACM0\"}),\" from this output and paste it into the serial section like this.\"]}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(t,{alt:\"4-zigbee2mqtt-configuration\",src:\"/static/images/2023/zigbee2mqtt-setup/4-zigbee2mqtt-configuration.webp\",width:\"988\",height:\"676\"})}),`\n`,(0,e.jsxs)(n.p,{children:[\"Because I am using the Sonoff Dongle E version I have to specify the adapter \",(0,e.jsx)(n.code,{children:\"ezsp\"}),\" .\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"You can find the option for your adapter \",(0,e.jsx)(n.a,{href:\"https://www.zigbee2mqtt.io/guide/adapters/\",children:\"here\"}),\".\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Next, with this, go to the info tab and click on \\u201CStart\\u201D\"}),`\n`,(0,e.jsx)(n.p,{children:\"And with this, your Zigbee2Mqtt is now up and running. If you check the logs tab, you should be able to see that Zigbee2Mqtt has started\"}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(t,{alt:\"5-zigbee2mqtt-logs\",src:\"/static/images/2023/zigbee2mqtt-setup/5-zigbee2mqtt-logs.webp\",width:\"1064\",height:\"484\"})}),`\n`,(0,e.jsx)(n.p,{children:\"You can access the Zigbee2Mqtt view using the option on the left panel.\"}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(t,{alt:\"6-zigbee2mqtt-addon\",src:\"/static/images/2023/zigbee2mqtt-setup/6-zigbee2mqtt-addon.webp\",width:\"1308\",height:\"712\"})}),`\n`,(0,e.jsxs)(n.h2,{id:\"running-zigbee2mqtt-as-a-docker-container\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#running-zigbee2mqtt-as-a-docker-container\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Running Zigbee2Mqtt As A Docker Container.\"]}),`\n`,(0,e.jsx)(n.p,{children:\"To run the Zigbee2Mqtt as a docker container you can start it with docker compose.\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"For this create a file called \",(0,e.jsx)(n.code,{children:\"docker-compose.yaml\"}),\" and add the following content\"]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"language-yaml code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"version\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'3'\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"services\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"zigbee2mqtt\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"container_name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` zigbee2mqtt  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"restart\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" unless\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`stopped  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"devices\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" /dev/ttyACM0\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`/dev/ttyACM0  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"ports\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"8080:8080\"'}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"volumes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" ./data\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`/app/data  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" /run/udev\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"/run/udev\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`ro  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"environment\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` TZ=Europe/Amsterdam  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"image\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` koenkk/zigbee2mqtt\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"Here you have to specify the location of the Zigbee dongle in the \",(0,e.jsx)(n.code,{children:\"devices\"}),\" property.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"To find the location of your Zigbee dongle, make sure you have connected the dongle to your machine, create a file called \",(0,e.jsx)(n.code,{children:\"find-usb.sh\"}),\" and paste the following content\"]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-shell\",children:(0,e.jsxs)(n.code,{className:\"language-shell code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"for\"}),\" \",(0,e.jsx)(n.span,{className:\"token for-or-select variable\",children:\"sysdevpath\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"in\"}),\" \",(0,e.jsxs)(n.span,{className:\"token variable\",children:[(0,e.jsx)(n.span,{className:\"token variable\",children:\"$(\"}),(0,e.jsx)(n.span,{className:\"token function\",children:\"find\"}),\" /sys/bus/usb/devices/usb*/ \",(0,e.jsx)(n.span,{className:\"token parameter variable\",children:\"-name\"}),\" dev\",(0,e.jsx)(n.span,{className:\"token variable\",children:\")\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),\" \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"do\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token assign-left variable\",children:\"syspath\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsxs)(n.span,{className:\"token string\",children:['\"',(0,e.jsxs)(n.span,{className:\"token variable\",children:[\"${sysdevpath\",(0,e.jsx)(n.span,{className:\"token operator\",children:\"%\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"/\"}),\"dev}\"]}),'\"']}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token assign-left variable\",children:\"devname\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsxs)(n.span,{className:\"token string\",children:['\"',(0,e.jsxs)(n.span,{className:\"token variable\",children:[(0,e.jsx)(n.span,{className:\"token variable\",children:\"$(\"}),\"udevadm info \",(0,e.jsx)(n.span,{className:\"token parameter variable\",children:\"-q\"}),\" name \",(0,e.jsx)(n.span,{className:\"token parameter variable\",children:\"-p\"}),\" $syspath\",(0,e.jsx)(n.span,{className:\"token variable\",children:\")\"})]}),'\"']}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\" \",(0,e.jsxs)(n.span,{className:\"token string\",children:['\"',(0,e.jsx)(n.span,{className:\"token variable\",children:\"$devname\"}),'\"']}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"==\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"bus/\"'}),\"* \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"&&\"}),\" \",(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\"exit\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\"eval\"}),\" \",(0,e.jsxs)(n.span,{className:\"token string\",children:['\"',(0,e.jsxs)(n.span,{className:\"token variable\",children:[(0,e.jsx)(n.span,{className:\"token variable\",children:\"$(\"}),\"udevadm info \",(0,e.jsx)(n.span,{className:\"token parameter variable\",children:\"-q\"}),\" property \",(0,e.jsx)(n.span,{className:\"token parameter variable\",children:\"--export\"}),\" \",(0,e.jsx)(n.span,{className:\"token parameter variable\",children:\"-p\"}),\" $syspath\",(0,e.jsx)(n.span,{className:\"token variable\",children:\")\"})]}),'\"']}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\" \",(0,e.jsx)(n.span,{className:\"token parameter variable\",children:\"-z\"}),\" \",(0,e.jsxs)(n.span,{className:\"token string\",children:['\"',(0,e.jsx)(n.span,{className:\"token variable\",children:\"$ID_SERIAL\"}),'\"']}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"&&\"}),\" \",(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\"exit\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token builtin class-name\",children:\"echo\"}),\" \",(0,e.jsxs)(n.span,{className:\"token string\",children:['\"/dev/',(0,e.jsx)(n.span,{className:\"token variable\",children:\"$devname\"}),\" - \",(0,e.jsx)(n.span,{className:\"token variable\",children:\"$ID_SERIAL\"}),'\"']}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"done\"}),`\n`]})]})}),`\n`,(0,e.jsx)(n.p,{children:\"Next, make this as an executable file using the following command\"}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"code-highlight\",children:(0,e.jsx)(n.span,{className:\"code-line\",children:`chmod +x find-usb.sh\n`})})}),`\n`,(0,e.jsxs)(n.p,{children:[\"Next, run this file using the \",(0,e.jsx)(n.code,{children:\"./\"}),\" command as below\"]}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"code-highlight\",children:(0,e.jsx)(n.span,{className:\"code-line\",children:`./find-usb.sh\n`})})}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(t,{alt:\"7-zigbee2mqtt-adapter\",src:\"/static/images/2023/zigbee2mqtt-setup/7-zigbee2mqtt-adapter.webp\",width:\"1112\",height:\"318\"})}),`\n`,(0,e.jsxs)(n.p,{children:[\"As you can see in the image above, the dongle location is \",(0,e.jsx)(n.code,{children:\"/dev/ttyACM0\"}),\" and we will use this value in the \",(0,e.jsx)(n.code,{children:\"docker-compose.yaml\"}),\" file from above.\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Next, we will create the configuration file for Zigbee2Mqtt\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"For this create the a \",(0,e.jsx)(n.code,{children:\"data\"}),\"folder in the same directory where your \",(0,e.jsx)(n.code,{children:\"docker-compose.yaml\"}),\" file is present and then create a \",(0,e.jsx)(n.code,{children:\"configuration.yaml\"}),\" file inside the \",(0,e.jsx)(n.code,{children:\"data\"}),\" folder with the following content\"]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"language-yaml code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"permit_join\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token boolean important\",children:\"true\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"mqtt\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"server\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" mqtt\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"//192.168.0.43\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"1883\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"serial\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"port\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` /dev/ttyACM0  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"frontend\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token boolean important\",children:\"true\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"advanced\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"homeassistant_legacy_entity_attributes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token boolean important\",children:\"false\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"legacy_api\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token boolean important\",children:\"false\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"legacy_availability_payload\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token boolean important\",children:\"false\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"device_options\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"legacy\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token boolean important\",children:\"false\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"devices\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"homeassistant\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"legacy_entity_attributes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token boolean important\",children:\"true\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"legacy_triggers\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token boolean important\",children:\"true\"}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"Here, specify the IP address of the MQTT server. In my case, it was \",(0,e.jsx)(n.code,{children:\"192.168.0.43:1883\"})]}),`\n`,(0,e.jsx)(n.p,{children:\"Now with this, you are ready to start the Zigbee2Mqtt server.\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"Now, from the location where the \",(0,e.jsx)(n.code,{children:\"docker-compose.yaml\"}),\" is located, run the command \",(0,e.jsx)(n.code,{children:\"docker compose up\"})]}),`\n`,(0,e.jsx)(n.p,{children:\"With this, you can now access the Zigbee2Mqtt interface using the IP address of your machine and port 8080 as shown.\"}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(t,{alt:\"8-zigbee2mqtt-ui\",src:\"/static/images/2023/zigbee2mqtt-setup/8-zigbee2mqtt-ui.webp\",width:\"1240\",height:\"508\"})}),`\n`,(0,e.jsxs)(n.h2,{id:\"connecting-zigbee-device-with-zigbee2mqtt-and-home-assistant\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#connecting-zigbee-device-with-zigbee2mqtt-and-home-assistant\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Connecting Zigbee Device with Zigbee2Mqtt And Home Assistant\"]}),`\n`,(0,e.jsx)(n.p,{children:\"With the Zigbee2Mqtt up and running, we will now connect a Zigbee device.\"}),`\n`,(0,e.jsx)(n.p,{children:\"For this, put the device in Pairing mode and then click on the \\u201CPermit Join (All)\\u201D button in the zigbee2Mqtt Interface.\"}),`\n`,(0,e.jsx)(n.p,{children:\"The Zigbee2Mqtt should automatically be able to detect and configure your device.\"}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(t,{alt:\"9-zigbee-device-with-zigbee2mqtt\",src:\"/static/images/2023/zigbee2mqtt-setup/9-zigbee-device-with-zigbee2mqtt.webp\",width:\"1154\",height:\"324\"})}),`\n`,(0,e.jsx)(n.p,{children:\"Now, go to Home Assistant Settings, click on \\u201CDevices & Services\\u201D, then search for your MQTT integration and you will be able to see your Zigbee device configured in Home Assistant\"}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(t,{alt:\"10-home-assistant-zigbee2mqtt\",src:\"/static/images/2023/zigbee2mqtt-setup/10-home-assistant-zigbee2mqtt.webp\",width:\"1064\",height:\"386\"})}),`\n`,(0,e.jsx)(n.p,{children:\"Now if you are interested in exploring more of such easy to follow step by step guides about Home Assistant, then here are a few suggestions\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://smarthomecircle.com/connect-zigbee-device-using-sonoff-zigbee-3-dongle-plus-to-home-assistant\",children:(0,e.jsx)(n.strong,{children:\"Connect Zigbee Plug Using Sonoff Zigbee 3.0 USB Dongle Plus\"})})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://smarthomecircle.com/how-to-setup-frigate-with-home-assistant\",children:(0,e.jsx)(n.strong,{children:\"Setup ESP32 Cam with Frigate And Home Assistant To Detect Objects\"})})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://smarthomecircle.com/add-matter-devices-to-home-assistant\",children:(0,e.jsx)(n.strong,{children:\"How I Added a Matter Device to Home Assistant\"})})}),`\n`]}),`\n`,(0,e.jsx)(\"br\",{})]})}}var q=v;function h(a,s){throw new Error(\"Expected \"+(s?\"component\":\"object\")+\" `\"+a+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return z;})();\n;return Component;","toc":[{"value":"Requirements","url":"#requirements","depth":2},{"value":"Setting Up Zigbee2Mqtt as a Home Assistant Add-On","url":"#setting-up-zigbee2mqtt-as-a-home-assistant-add-on","depth":2},{"value":"Running Zigbee2Mqtt As A Docker Container.","url":"#running-zigbee2mqtt-as-a-docker-container","depth":2},{"value":"Connecting Zigbee Device with Zigbee2Mqtt And Home Assistant","url":"#connecting-zigbee-device-with-zigbee2mqtt-and-home-assistant","depth":2}],"frontMatter":{"readingTime":{"text":"6 min read","minutes":5.92,"time":355200,"words":1184},"slug":"2023/install-zigbee2mqtt-with-home-assistant","fileName":"2023/install-zigbee2mqtt-with-home-assistant.md","title":"How to Setup Zigbee2Mqtt with Home Assistant — Step By Step Guide","author":"Amrut Prabhu","categories":"","tags":["Zigbee","Zigbee2mqtt","Sonoff Dongle Plus","MQTT","Home Assistant"],"photo-credits":null,"applaud-link":"2021/spring-boot-stream-kafka.json","date":"2023-10-02T00:00:00.000Z","draft":false,"summary":"In this article, we will look at how you can set up a Zigbee2Mqtt with Home Assistant","imageUrl":"/static/images/2023/zigbee2mqtt-setup/cover.webp","actualUrl":"2023/install-zigbee2mqtt-with-home-assistant","customUrl":"install-zigbee2mqtt-with-home-assistant","youtubeLink":"https://www.youtube.com/embed/nNLgCUFRNsk"}},"authorDetails":[{"readingTime":{"text":"2 min read","minutes":1.045,"time":62700,"words":209},"slug":["default"],"fileName":"default.md","name":"Amrut Prabhu","avatar":"/static/images/avatar-small.jpg","avatarBig":"/static/images/avatar-big.jpg","occupation":"","company":"","email":"contactsmarthomecircle@gmail.com","twitter":"https://twitter.com/smarthomecircle","linkedin":"","github":"","youtube":"https://www.youtube.com/@SmartHomeCircle","customUrl":"default","actualUrl":"default","date":null}],"prev":{"title":"How To Change Graph Colors in Energy Dashboard In Home Assistant","author":"Amrut Prabhu","categories":"","tags":["Energy Graph","Energy Dashboard","Home Assistant"],"photo-credits":null,"applaud-link":"2021/spring-boot-stream-kafka.json","date":"2023-09-21T00:00:00.000Z","draft":false,"summary":"In this article, we will look at how you can change colors for your energy graph in the energy dashboard of Home Assistant.","imageUrl":"/static/images/2023/energy-dashboard-home-assistant/cover.jpg","actualUrl":"2023/change-graph-colors-in-energy-dashboard-home-assistant","customUrl":"change-graph-colors-in-energy-dashboard-home-assistant","youtubeLink":"https://www.youtube.com/embed/9c2XUjobVB8","slug":"change-graph-colors-in-energy-dashboard-home-assistant"},"next":{"title":"How to Control LED Strip with Home Assistant Using WLED — Step-By-Step Guide","author":"Amrut Prabhu","categories":"","tags":["WLED","LED lights","LED strip","Home Assistant"],"photo-credits":null,"applaud-link":"2021/spring-boot-stream-kafka.json","date":"2023-10-12T00:00:00.000Z","draft":false,"summary":"In this article, we will look at how you can control an LED strip with Home Assistant using WLED.","imageUrl":"/static/images/2023/wled-with-home-assistant/cover.jpg","actualUrl":"2023/how-to-connect-led-strip-with-home-assistant-using-wled","customUrl":"how-to-connect-led-strip-with-home-assistant-using-wled","youtubeLink":"https://www.youtube.com/embed/eFPBkX-jPag","slug":"how-to-connect-led-strip-with-home-assistant-using-wled"}},"__N_SSG":true}