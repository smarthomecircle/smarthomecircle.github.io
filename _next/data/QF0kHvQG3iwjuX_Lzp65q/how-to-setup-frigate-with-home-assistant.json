{"pageProps":{"post":{"mdxSource":"var Component=(()=>{var p=Object.create;var c=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var k=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var l=a=>c(a,\"__esModule\",{value:!0});var g=(a,t)=>()=>(t||a((t={exports:{}}).exports,t),t.exports),f=(a,t)=>{l(a);for(var i in t)c(a,i,{get:t[i],enumerable:!0})},y=(a,t,i)=>{if(t&&typeof t==\"object\"||typeof t==\"function\")for(let n of u(t))!N.call(a,n)&&n!==\"default\"&&c(a,n,{get:()=>t[n],enumerable:!(i=m(t,n))||i.enumerable});return a},w=a=>y(l(c(a!=null?p(k(a)):{},\"default\",a&&a.__esModule&&\"default\"in a?{get:()=>a.default,enumerable:!0}:{value:a,enumerable:!0})),a);var d=g((I,r)=>{r.exports=_jsx_runtime});var F={};f(F,{default:()=>A,frontmatter:()=>b});var e=w(d()),b={title:\"How I Setup ESP32 Cam with Frigate And Home Assistant To Detect Objects\\u200A\\u2014\\u200AStep-By-Step Guide\",author:\"Amrut Prabhu\",categories:\"\",tags:[\"Tuya\",\"Local Tuya\",\"Smart Wifi Plug\",\"Home Assistant\"],\"photo-credits\":null,\"applaud-link\":\"2021/spring-boot-stream-kafka.json\",date:\"2023-09-07\",draft:!1,summary:\"In this article, we will be looking at how we configure Frigate to detect object and then connect it to Home Assistant to receive notification.\",imageUrl:\"/static/images/2023/frigate-setup-with-home-assistant/cover.jpg\",actualUrl:\"auto-generated\",customUrl:\"auto-generated\",youtubeLink:\"https://www.youtube.com/embed/83xFs79NzTY\",youtubeLink2:\"https://www.youtube.com/embed/05_BF4DVJWg\"};function v(a={}){let{wrapper:t}=a.components||{};return t?(0,e.jsx)(t,Object.assign({},a,{children:(0,e.jsx)(i,{})})):i();function i(){let n=Object.assign({p:\"p\",h2:\"h2\",a:\"a\",span:\"span\",ol:\"ol\",li:\"li\",br:\"br\",strong:\"strong\",pre:\"pre\",code:\"code\",div:\"div\",ul:\"ul\"},a.components),{TOCInline:o,Image:s}=n;return s||h(\"Image\",!0),o||h(\"TOCInline\",!0),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.p,{children:\"In this article, we will be looking at how we configure Frigate to detect object and then connect it to Home Assistant to receive notification.\"}),`\n`,(0,e.jsx)(o,{toc:a.toc,asDisclosure:!0}),`\n`,(0,e.jsxs)(n.h2,{id:\"requirements\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#requirements\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Requirements\"]}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[\"ESP32 Camera working with a Camera server\",(0,e.jsx)(n.br,{}),`\n`,\"If you have not got it working you can refer to this guide \",(0,e.jsx)(n.a,{href:\"https://smarthomecircle.com/esp32-cam-esphome-with-home-assistant\",children:\"here\"}),\" to see how you can get your ESP32 camera up and running\"]}),`\n`,(0,e.jsxs)(n.li,{children:[\"HACS\\u200A\\u2014\\u200AHome Assistant Community Store\",(0,e.jsx)(n.br,{}),`\n`,\"If you have not installed it, you can check this video where I show you how you can set it up.\"]}),`\n`]}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"Important Note:\"}),\" If you planning to install Frigate on Raspberry Pi, it would be pretty slow or may not work at all as Frigate takes quite some CPU power.\"]}),`\n`,(0,e.jsx)(n.p,{children:\"I would recommend using Frigate as an addon in Home Assistant OS if you are running more powerful hardware compared to a Raspberry Pi.\"}),`\n`,(0,e.jsx)(n.p,{children:\"Another option is to run Frigate on a separate machine using a docker container and connect it to Home Assistant.\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"install-frigate-addon-in-home-assistant-os\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#install-frigate-addon-in-home-assistant-os\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Install Frigate Addon In Home Assistant OS\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Navigate to the Addon store in the settings section and click \\u201CAddons store\\u201D in the bottom right-hand corner.\"}),`\n`,(0,e.jsx)(n.p,{children:\"Now, click on the three dots in the right-hand top corner and choose \\u201Cadd repository\\u201D\"}),`\n`,(0,e.jsx)(n.p,{children:\"Add the following repository value\"}),`\n`,(0,e.jsx)(n.pre,{children:(0,e.jsx)(n.code,{className:\"code-highlight\",children:(0,e.jsx)(n.span,{className:\"code-line\",children:`https://github.com/blakeblackshear/frigate-hass-addons\n`})})}),`\n`,(0,e.jsx)(n.p,{children:\"Now refresh the UI, search for \\u201CFrigate\\u201D and choose the Frigate option\"}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(s,{alt:\"1-frigate-addon-store\",src:\"/static/images/2023/frigate-setup-with-home-assistant/1-frigate-addon-store.webp\",width:\"1956\",height:\"1132\"})}),`\n`,(0,e.jsx)(n.p,{children:\"Now, click on \\u201CInstall\\u201D and then after installation click on \\u201CStart\\u201D.\"}),`\n`,(0,e.jsx)(n.p,{children:\"Finally, turn on the option to \\u201CShow in sidebar\\u201D. This will make it easy to access it.\"}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(s,{alt:\"2-frigate-installed\",src:\"/static/images/2023/frigate-setup-with-home-assistant/2-frigate-installed.webp\",width:\"1582\",height:\"1118\"})}),`\n`,(0,e.jsx)(n.p,{children:\"Now you can access the Frigate UI in the left panel.\"}),`\n`,(0,e.jsx)(n.p,{children:\"Next, you will have to run an MQTT broker. You can refer this guide here, to see how you can run it.\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"run-frigate-as-a-docker-container-with-docker-compose\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#run-frigate-as-a-docker-container-with-docker-compose\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Run Frigate As a Docker Container With Docker Compose\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"To run Frigate as a Docker container, you will need to create a file named \",(0,e.jsx)(n.code,{children:\"docker-compose.yaml\"}),\" and add the following content.\"]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"language-yaml code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"version\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"3.9\"'}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"services\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"frigate\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"container_name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` frigate  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"privileged\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token boolean important\",children:\"true\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"# this may not be necessary for all setups  \"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"restart\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" unless\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`stopped  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"image\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" ghcr.io/blakeblackshear/frigate\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`stable  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"shm_size\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"64mb\"'}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"devices\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" /dev/dri/renderD128 \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"# for intel hwaccel, needs to be updated for your hardware  \"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"volumes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" /etc/localtime\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"/etc/localtime\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`ro  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" ./config.yml\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`/config/config.yml  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" ./storage\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`/media/frigate  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"type\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" tmpfs \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"# Optional: 1GB of memory, reduces SSD/SD Card wear  \"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"target\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` /tmp/cache  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"tmpfs\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"size\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"1000000000\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"ports\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"5000:5000\"'}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"8554:8554\"'}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"# RTSP feeds  \"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"8555:8555/tcp\"'}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"# WebRTC over tcp  \"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"8555:8555/udp\"'}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"# WebRTC over udp  \"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"environment\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"FRIGATE_RTSP_PASSWORD\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"password\"'}),`\n`]})]})}),`\n`,(0,e.jsxs)(n.p,{children:[\"Note: Since I am running this on an Intel-based system, I have added \",(0,e.jsx)(n.code,{children:\"/dev/dri/renderD128\"}),\" to add Hardware acceleration.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"You can check out \",(0,e.jsx)(n.a,{href:\"https://docs.frigate.video/configuration/hardware_acceleration/\",children:\"this\"}),\" documentation to select the appropriate option for your machine.\"]}),`\n`,(0,e.jsx)(n.p,{children:\"You can also decide not to add the \\u201Cdevices\\u201D option in the file and use Frigate without hardware acceleration.\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"Now you can run it with \",(0,e.jsx)(n.code,{children:\"docker compose up\"}),\" command to start Frigate.\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Along with this, you will need an MQTT message broker.\"}),`\n`,(0,e.jsx)(n.p,{children:\"You can check out this link here, wherein I explain how you can install it in Home Assistant OS as well as a Docker container.\"}),`\n`,(0,e.jsx)(n.p,{children:\"With this, you have just started running Frigate.\"}),`\n`,(0,e.jsx)(n.p,{children:\"Now let\\u2019s configure a camera in Frigate.\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"adding-esp32-camera-to-frigate\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#adding-esp32-camera-to-frigate\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Adding ESP32 Camera to Frigate\"]}),`\n`,(0,e.jsx)(n.p,{children:\"For this, open the figate UI and click on the config option in the left panel.\"}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(s,{alt:\"3-frigate-config-view\",src:\"/static/images/2023/frigate-setup-with-home-assistant/3-frigate-config-view.webp\",width:\"1902\",height:\"882\"})}),`\n`,(0,e.jsx)(n.p,{children:\"Now add the following configuration\"}),`\n`,(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"language-yaml code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"mqtt\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"host\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" 192.168.0.43  \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ip address of your mqtt broker  \"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"port\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"1883\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"topic_prefix\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` frigate  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"client_id\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` frigate  \n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`  \n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"detectors\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"cpu0\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"type\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` cpu  \n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`  \n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"cameras\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"cam_01\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"ffmpeg\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"input_args\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"\"'}),`          \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"inputs\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"path\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" http\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"//192.168.0.98\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"8080\"}),\"  \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"#ESp32 camera location  \"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"roles\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` detect  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` record  \n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`  \n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"output_args\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"       \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"record\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"f segment \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"pix_fmt yuv420p \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"segment_time 10 \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"segment_format mp4 \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"reset_timestamps 1 \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"strftime 1 \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"c\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"v libx264 \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"preset ultrafast \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`an  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"rtmp\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"enabled\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token boolean important\",children:\"False\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"snapshots\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"enabled\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token boolean important\",children:\"true\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"bounding_box\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token boolean important\",children:\"true\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"record\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"enabled\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token boolean important\",children:\"True\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"retain\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"days\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"0\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"# To not retain any recording if there is no detection of any events  \"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`  \n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"events\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"retain\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"default\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"3\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"# To retain recording for 3 days of only the events that happened  \"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"mode\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` active_objects  \n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`  \n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"detect\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"enabled\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token boolean important\",children:\"True\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"width\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"800\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"height\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"600\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"fps\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"20\"}),\"      \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"#Adjust the fps based on what suits your hardware.  \"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"objects\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"track\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` person  \n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`  \n`})]})}),`\n`,(0,e.jsx)(n.p,{children:\"Now the above configuration is setting the following.\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"Setting the connection to an MQTT broker.\"}),`\n`,(0,e.jsx)(n.li,{children:\"Setting the detectors to use CPU.\"}),`\n`,(0,e.jsx)(n.li,{children:\"Specifying the IP address of the ESP32 Camera\"}),`\n`,(0,e.jsx)(n.li,{children:\"Record role to record clips and detect role to detect events.\"}),`\n`,(0,e.jsx)(n.li,{children:\"Capture snapshots and show the bounding box.\"}),`\n`,(0,e.jsx)(n.li,{children:\"Enabling Recording and setting retention time.\"}),`\n`,(0,e.jsx)(n.li,{children:\"Object tracking is set to track people.\"}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"With this, click on save and restart.\"}),`\n`,(0,e.jsx)(n.p,{children:\"Once it restarts you should be able to see your ESP32 Camera output in the camera section\"}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(s,{alt:\"4-frigate-cam-view\",src:\"/static/images/2023/frigate-setup-with-home-assistant/4-frigate-cam-view.webp\",width:\"2038\",height:\"1082\"})}),`\n`,(0,e.jsx)(n.p,{children:\"Now let\\u2019s connect it to Home Assistant\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"connecting-frigate-to-home-assistant\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#connecting-frigate-to-home-assistant\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Connecting Frigate to Home Assistant\"]}),`\n`,(0,e.jsx)(n.p,{children:\"For this you will have to open HACS, click on \\u201CIntegrations\\u201D and click on \\u201CExplore & Download Repository\\u201D from the bottom right-hand corner.\"}),`\n`,(0,e.jsx)(n.p,{children:\"Now search for Frigate and you should find the Frigate Integration\"}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(s,{alt:\"5-frigate-integration\",src:\"/static/images/2023/frigate-setup-with-home-assistant/5-frigate-integration.webp\",width:\"1928\",height:\"912\"})}),`\n`,(0,e.jsx)(n.p,{children:\"Click on it and then click \\u201CDownload\\u201D from the bottom right-hand corner.\"}),`\n`,(0,e.jsx)(n.p,{children:\"Once it's downloaded, make sure you restart Home Assistant.\"}),`\n`,(0,e.jsx)(n.p,{children:\"Once Home Assistant starts up, navigate to \\u201CSettings\\u201D, then \\u201CDevices & Services\\u201D.\"}),`\n`,(0,e.jsx)(n.p,{children:\"Then click on \\u201CAdd Integration\\u201D in the bottom right-hand corner, search for \\u201CFrigate\\u201D and install it.\"}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(s,{alt:\"6-frigate-url\",src:\"/static/images/2023/frigate-setup-with-home-assistant/6-frigate-url.webp\",width:\"2764\",height:\"1540\"})}),`\n`,(0,e.jsx)(n.p,{children:\"If you are running Frigate as a Home Assistant OS addon, you can leave the default value that appears and click submit.\"}),`\n`,(0,e.jsx)(n.p,{children:\"If you are running Frigate as a Docker container then you will have to provide the IP address of the machine running Frigate and keep the default port of 5000 as shown in the picture above.\"}),`\n`,(0,e.jsx)(n.p,{children:\"On clicking submit you should be able to view your ESP32 Camera as one of the devices in Frigate\"}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(s,{alt:\"7-frigate-configured\",src:\"/static/images/2023/frigate-setup-with-home-assistant/7-frigate-configured.webp\",width:\"1496\",height:\"682\"})}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(s,{alt:\"8-home-assistant-frigate-view\",src:\"/static/images/2023/frigate-setup-with-home-assistant/8-home-assistant-frigate-view.webp\",width:\"2504\",height:\"1432\"})}),`\n`,(0,e.jsx)(n.p,{children:\"Sometimes it can take a while for the sensors to show as \\u201Cunavailable\\u201D but they will eventually show up.\"}),`\n`,(0,e.jsx)(n.p,{children:\"With this, you have just added an ESP32 Camera to Frigate and connected Frigate to Home Assistant.\"}),`\n`,(0,e.jsx)(n.p,{children:\"Next, Look at how you can be notified of any detection in Frigate in your Home Assistant App.\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"frigate-notification-in-home-assistant-app\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#frigate-notification-in-home-assistant-app\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Frigate Notification in Home Assistant App\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"The simplest method is to import \",(0,e.jsx)(n.a,{href:\"https://community.home-assistant.io/t/frigate-mobile-app-notifications-2-0/559732\",children:\"this\"}),\" blueprint to Home Assistant which will help you configure the notifications.\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Once you import the above blueprint, head over to \\u201CAutomations & Scenes\\u201D in the settings and click on \\u201CCreate Automation\\u201D\"}),`\n`,(0,e.jsx)(n.p,{children:\"Now select the blueprint that we just imported\"}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(s,{alt:\"9-frigate-notification-automation\",src:\"/static/images/2023/frigate-setup-with-home-assistant/9-frigate-notification-automation.webp\",width:\"1616\",height:\"872\"})}),`\n`,(0,e.jsx)(n.p,{children:\"Next, you will have to specify the camera entity that was added as part of Frigate, the device on which you want to be notified, and select the other options to customize the notification that you want to be sent to the Home Assistant App.\"}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(s,{alt:\"10-frigate-notification-config\",src:\"/static/images/2023/frigate-setup-with-home-assistant/10-frigate-notification-config.webp\",width:\"2884\",height:\"1738\"})}),`\n`,(0,e.jsx)(n.p,{children:\"With this we have set up Frigate, connected it to Home Assistant, and also receive notifications on the Home Assistant App.\"}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(s,{alt:\"11-frigate-notification\",src:\"/static/images/2023/frigate-setup-with-home-assistant/11-frigate-notification.webp\",width:\"1936\",height:\"1316\"})}),`\n`,(0,e.jsx)(n.p,{children:\"Now if you are interested in exploring more of such easy to follow step by step guides about Home Assistant, then here are a few suggestions\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://smarthomecircle.com/connect-zigbee-device-using-sonoff-zigbee-3-dongle-plus-to-home-assistant\",children:(0,e.jsx)(n.strong,{children:\"Connect Zigbee Plug Using Sonoff Zigbee 3.0 USB Dongle Plus\"})})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://smarthomecircle.com/air-quality-sensor-and-light-sensor-esp32-home-assistant\",children:(0,e.jsx)(n.strong,{children:\"How I Built My Own Air Quality Monitor With Light Sensor For Home Assistant\"})})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://smarthomecircle.com/add-matter-devices-to-home-assistant\",children:(0,e.jsx)(n.strong,{children:\"How I Added a Matter Device to Home Assistant\"})})}),`\n`]})]})}}var A=v;function h(a,t){throw new Error(\"Expected \"+(t?\"component\":\"object\")+\" `\"+a+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return F;})();\n;return Component;","toc":[{"value":"Requirements","url":"#requirements","depth":2},{"value":"Install Frigate Addon In Home Assistant OS","url":"#install-frigate-addon-in-home-assistant-os","depth":2},{"value":"Run Frigate As a Docker Container With Docker Compose","url":"#run-frigate-as-a-docker-container-with-docker-compose","depth":2},{"value":"Adding ESP32 Camera to Frigate","url":"#adding-esp32-camera-to-frigate","depth":2},{"value":"Connecting Frigate to Home Assistant","url":"#connecting-frigate-to-home-assistant","depth":2},{"value":"Frigate Notification in Home Assistant App","url":"#frigate-notification-in-home-assistant-app","depth":2}],"frontMatter":{"readingTime":{"text":"8 min read","minutes":7.845,"time":470700,"words":1569},"slug":"2023/how-to-setup-frigate-with-home-assistant","fileName":"2023/how-to-setup-frigate-with-home-assistant.md","title":"How I Setup ESP32 Cam with Frigate And Home Assistant To Detect Objects — Step-By-Step Guide","author":"Amrut Prabhu","categories":"","tags":["Tuya","Local Tuya","Smart Wifi Plug","Home Assistant"],"photo-credits":null,"applaud-link":"2021/spring-boot-stream-kafka.json","date":"2023-09-07T00:00:00.000Z","draft":false,"summary":"In this article, we will be looking at how we configure Frigate to detect object and then connect it to Home Assistant to receive notification.","imageUrl":"/static/images/2023/frigate-setup-with-home-assistant/cover.jpg","actualUrl":"2023/how-to-setup-frigate-with-home-assistant","customUrl":"how-to-setup-frigate-with-home-assistant","youtubeLink":"https://www.youtube.com/embed/83xFs79NzTY","youtubeLink2":"https://www.youtube.com/embed/05_BF4DVJWg"}},"authorDetails":[{"readingTime":{"text":"1 min read","minutes":0.775,"time":46500,"words":155},"slug":["default"],"fileName":"default.md","name":"Amrut Prabhu","avatar":"/static/images/avatar-small.jpg","avatarBig":"/static/images/avatar-big.jpg","occupation":"","company":"","email":"SmartHomeCircle@gmail.com","twitter":"https://twitter.com/amrutprabhu42","linkedin":"","github":"","youtube":"https://www.youtube.com/@SmartHomeCircle","customUrl":"default","actualUrl":"default","date":null}],"prev":{"title":"How I Setup MQTT Broker Docker Container Or Addon In Home Assistant — Step-By-Step Guide","author":"Amrut Prabhu","categories":"","tags":["MQTT","Home Assistant","Docker"],"photo-credits":null,"applaud-link":"2021/spring-boot-stream-kafka.json","date":"2023-09-07T00:00:00.000Z","draft":false,"summary":"In this article, we will be looking at how we configure Frigate to detect object and then connect it to Home Assistant to receive notification.","imageUrl":"/static/images/2023/mqtt-broker-setup/cover.jpg","actualUrl":"2023/how-to-setup-mqtt-docker-container-with-home-assistant","customUrl":"how-to-setup-mqtt-docker-container-with-home-assistant","youtubeLink":"","slug":"how-to-setup-mqtt-docker-container-with-home-assistant"},"next":{"title":"How To Change Graph Colors in Energy Dashboard In Home Assistant","author":"Amrut Prabhu","categories":"","tags":["Energy Graph","Energy Dashboard","Home Assistant"],"photo-credits":null,"applaud-link":"2021/spring-boot-stream-kafka.json","date":"2023-09-21T00:00:00.000Z","draft":false,"summary":"In this article, we will look at how you can change colors for your energy graph in the energy dashboard of Home Assistant.","imageUrl":"/static/images/2023/energy-dashboard-home-assistant/cover.jpg","actualUrl":"2023/change-graph-colors-in-energy-dashboard-home-assistant","customUrl":"change-graph-colors-in-energy-dashboard-home-assistant","youtubeLink":"https://www.youtube.com/embed/9c2XUjobVB8","slug":"change-graph-colors-in-energy-dashboard-home-assistant"}},"__N_SSG":true}