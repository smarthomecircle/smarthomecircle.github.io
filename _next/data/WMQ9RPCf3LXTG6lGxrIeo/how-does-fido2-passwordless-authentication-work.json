{"pageProps":{"post":{"mdxSource":"var Component=(()=>{var l=Object.create;var a=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,w=Object.prototype.hasOwnProperty;var s=n=>a(n,\"__esModule\",{value:!0});var g=(n,i)=>()=>(i||n((i={exports:{}}).exports,i),i.exports),m=(n,i)=>{s(n);for(var r in i)a(n,r,{get:i[r],enumerable:!0})},f=(n,i,r)=>{if(i&&typeof i==\"object\"||typeof i==\"function\")for(let t of p(i))!w.call(n,t)&&t!==\"default\"&&a(n,t,{get:()=>i[t],enumerable:!(r=d(i,t))||r.enumerable});return n},k=n=>f(s(a(n!=null?l(u(n)):{},\"default\",n&&n.__esModule&&\"default\"in n?{get:()=>n.default,enumerable:!0}:{value:n,enumerable:!0})),n);var c=g((D,h)=>{h.exports=_jsx_runtime});var A={};m(A,{default:()=>I,frontmatter:()=>b});var e=k(c()),b={title:\"FIDO2 Passwordless Authentication With Keycloak\\u200A-\\u200APart\\xA01\",author:\"Amrut Prabhu\",categories:\"\",tags:[\"Keycloak\",\"Passwordless\",\"Authentication\",\"FIDO2\"],\"photo-credits\":null,\"applaud-link\":\"2021/spring-boot-stream-kafka.json\",date:\"2023-04-13\",draft:!1,summary:\"In this article we will look into understanding how FIDO2 passwordless authentication works\",imageUrl:\"/static/images/2023/fido2-authentication-with-keycloak/cover.jpg\",actualUrl:\"auto-generated\",customUrl:\"auto-generated\"};function y(n={}){let{wrapper:i}=n.components||{};return i?(0,e.jsx)(i,Object.assign({},n,{children:(0,e.jsx)(r,{})})):r();function r(){let t=Object.assign({p:\"p\",h2:\"h2\",a:\"a\",span:\"span\",ol:\"ol\",li:\"li\",div:\"div\",ul:\"ul\"},n.components),{Image:o}=t;return o||v(\"Image\",!0),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(t.p,{children:\"This is a two-part article on understanding and implementing FIDO2 passwordless authentication with Keycloak\"}),`\n`,(0,e.jsx)(t.p,{children:\"In this article, we will be exploring how passwordless authentication works between the client and the server. In my next article \\u201CFIDO2 Passwordless Authentication With Keycloak\\u200A\\u2014\\u200APart 2\\u201D, we will explore how we can implement it in Keycloak.\"}),`\n`,(0,e.jsxs)(t.h2,{id:\"introduction\",children:[(0,e.jsx)(t.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#introduction\",children:(0,e.jsx)(t.span,{className:\"icon icon-link\"})}),\"Introduction\"]}),`\n`,(0,e.jsx)(t.p,{children:\"The FIDO2 (Fast IDentity Online) standard allows for replacing weak password-based authentication with strong hardware-based authentication using private and public key (asymmetric) cryptography.\"}),`\n`,(0,e.jsx)(t.p,{children:\"FIDO2 is the latest set of specifications from the FIDO Alliance. It enables using common devices to authenticate with online services on both mobile and desktops, using unique cryptographic login credentials for every site.\"}),`\n`,(0,e.jsx)(t.p,{children:\"FIDO2 is comprised of two standardized components.\"}),`\n`,(0,e.jsxs)(t.ol,{children:[`\n`,(0,e.jsx)(t.li,{children:\"Web API (WebAuthn)\"}),`\n`,(0,e.jsx)(t.li,{children:\"Client to Authenticator Protocol (CTAP).\"}),`\n`]}),`\n`,(0,e.jsx)(t.p,{children:\"The two work together and are required to achieve a passwordless experience for login.\"}),`\n`,(0,e.jsx)(t.p,{children:\"WebAuthn is the main component of FIDO2. It is a set of standards and APIs that allows a browser to communicate with the operating system to deal with cryptographic keys. WebAuthn is however developed by the W3C and the combination of FIDO with WebAuthn brings in FIDO2.\"}),`\n`,(0,e.jsx)(t.p,{children:\"With FIDO2 you can combine hardware-based authentication with an additional factor such as a PIN or fingerprint. The purpose of the PIN or fingerprint would be to unlock the Security Key so it can perform cryptographic tasks. This PIN or fingerprint is stored locally on the device and would never be sent across the network.\"}),`\n`,(0,e.jsxs)(t.h2,{id:\"how-does-fido2-passwordless-authentication-work\",children:[(0,e.jsx)(t.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#how-does-fido2-passwordless-authentication-work\",children:(0,e.jsx)(t.span,{className:\"icon icon-link\"})}),\"How does FIDO2 Passwordless Authentication work?\"]}),`\n`,(0,e.jsx)(t.p,{children:\"Let's look at the interaction between the client and the server during registration\"}),`\n`,(0,e.jsx)(t.div,{children:(0,e.jsx)(o,{alt:\"FIDO2 Authentication registration\",src:\"/static/images/2023/fido2-authentication-with-keycloak/FIDO2.png\",width:\"922\",height:\"1103\"})}),`\n`,(0,e.jsx)(t.p,{children:\"As you can see in the diagram, the client initiates a registration process with the server which returns a challenge JWT. The WebAuthn APIs implemented in the browser find the available authenticators and asks the user to select an authenticator. This could be your phone or the laptop itself.\"}),`\n`,(0,e.jsx)(t.p,{children:\"Once the user selects an authenticator, WebAuthen then generates a public and private key pair by communicating with the operating system. It then signs the challenge with the private key to generate the signature, stores the private key on the client\\u2019s device, and then sends over the public key and the signature to the server.\"}),`\n`,(0,e.jsx)(t.p,{children:\"The server then validates the signature using the received public key and stores the public key along with registration.\"}),`\n`,(0,e.jsx)(t.p,{children:\"Now let's look at how the authentication flow works.\"}),`\n`,(0,e.jsx)(t.div,{children:(0,e.jsx)(o,{alt:\"FIDO2 Authentication mechanism\",src:\"/static/images/2023/fido2-authentication-with-keycloak/FIDO2-authentication.png\",width:\"890\",height:\"1087\"})}),`\n`,(0,e.jsx)(t.p,{children:\"When the user wants to authenticate, the client initiates the login, and the server now sends a challenge JWT.\"}),`\n`,(0,e.jsx)(t.p,{children:\"The browser then invokes the WebAuthn API with the challenge, which then prompts the user with the authenticator with which the user can authenticate.\"}),`\n`,(0,e.jsx)(t.p,{children:\"On selecting the authenticator and granting access using either the pin or fingerprint, the WebAuthn API now gets the private key that was stored previously on the device.\"}),`\n`,(0,e.jsx)(t.p,{children:\"Using this private key, it now signs the challenge JWT and sends the signature to the server.\"}),`\n`,(0,e.jsx)(t.p,{children:\"On the server side, the server finds the appropriate public key of the user which was provided during registration, and verifies the signature. If the signature is valid, it allows the login to be successful.\"}),`\n`,(0,e.jsx)(\"b\",{children:\" Next...\"}),`\n`,(0,e.jsxs)(t.p,{children:[\"In my next article, We will look into how we can \",(0,e.jsx)(t.a,{href:\"https://refactorfirst.com/how-does-fido2-passwordless-authentication-work\",children:\"set up FIDO2 passwordless authentication using Keycloak\"}),\" .\"]}),`\n`,(0,e.jsx)(t.p,{children:\"If you\\u2019re looking for more articles to expand your knowledge of software development, here are three additional recommendations:\"}),`\n`,(0,e.jsxs)(t.ul,{children:[`\n`,(0,e.jsxs)(t.li,{children:[(0,e.jsx)(t.a,{href:\"https://refactorfirst.com/spring-boot-aws-rds-jdbc-secrets-rotation-without-restart\",children:\"Spring Boot: AWS RDS JDBC password rotation without restarting\"}),\".\"]}),`\n`,(0,e.jsxs)(t.li,{children:[(0,e.jsx)(t.a,{href:\"https://refactorfirst.com/spring-cloud-stream-with-kafka-communication\",children:\"Spring Cloud Stream With Kafka\"}),\".\"]}),`\n`,(0,e.jsxs)(t.li,{children:[(0,e.jsx)(t.a,{href:\"https://refactorfirst.com/spring-boot-spring-cache-with-ehcache-3\",children:\"Caching with Spring Cache and Ehcache 3\"}),\".\"]}),`\n`]}),`\n`,(0,e.jsxs)(t.p,{children:[\"I keep exploring and learning new things. If you want to know the latest trends and improve your software development skills, then subscribe to my newsletter below and also follow me on \",(0,e.jsx)(t.a,{href:\"https://twitter.com/amrutprabhu42\",children:\"Twitter\"}),\".\"]}),`\n`,(0,e.jsx)(t.p,{children:\"Enjoy!!\"})]})}}var I=y;function v(n,i){throw new Error(\"Expected \"+(i?\"component\":\"object\")+\" `\"+n+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return A;})();\n;return Component;","toc":[{"value":"Introduction","url":"#introduction","depth":2},{"value":"How does FIDO2 Passwordless Authentication work?","url":"#how-does-fido2-passwordless-authentication-work","depth":2}],"frontMatter":{"readingTime":{"text":"4 min read","minutes":3.42,"time":205200,"words":684},"slug":"2023/how-does-fido2-passwordless-authentication-work","fileName":"2023/how-does-fido2-passwordless-authentication-work.md","title":"FIDO2 Passwordless Authentication With Keycloak - Part 1","author":"Amrut Prabhu","categories":"","tags":["Keycloak","Passwordless","Authentication","FIDO2"],"photo-credits":null,"applaud-link":"2021/spring-boot-stream-kafka.json","date":"2023-04-13T00:00:00.000Z","draft":false,"summary":"In this article we will look into understanding how FIDO2 passwordless authentication works","imageUrl":"/static/images/2023/fido2-authentication-with-keycloak/cover.jpg","actualUrl":"2023/how-does-fido2-passwordless-authentication-work","customUrl":"how-does-fido2-passwordless-authentication-work"}},"authorDetails":[{"readingTime":{"text":"1 min read","minutes":0.74,"time":44400,"words":148},"slug":["default"],"fileName":"default.md","name":"Amrut Prabhu","avatar":"/static/images/avatar-small.jpg","avatarBig":"/static/images/avatar-big.jpg","occupation":"","company":"","email":"contact@refactorfirst.com","twitter":"https://twitter.com/amrutprabhu42","linkedin":"","github":"","customUrl":"default","actualUrl":"default","date":null}],"prev":{"title":"Kick Start Spring Boot On AWS Lambda with Snap Start","author":"Amrut Prabhu","categories":"","tags":["Java","Spring Boot","AWS","AWS Lambda","Spring Cloud","Spring Cloud Functions"],"photo-credits":"https://unsplash.com/photos/NLgqFA9Lg_E","applaud-link":"2021/spring-boot-stream-kafka.json","date":"2023-01-26T00:00:00.000Z","draft":false,"summary":"We will look into how we can create an AWS Lambda with Terraform and run a Spring Boot application to view its performance with the Snap Start option enabled","imageUrl":"/static/images/2023/kick-start-spring-boot-on-lambda/cover.jpg","actualUrl":"2023/kick-start-spring-boot-application-with-aws-lambda-snap-start","customUrl":"kick-start-spring-boot-application-with-aws-lambda-snap-start","slug":"kick-start-spring-boot-application-with-aws-lambda-snap-start"},"next":{"title":"FIDO2 Passwordless Authentication With Keycloak - Part 2","author":"Amrut Prabhu","categories":"","tags":["Keycloak","Authentication","Passwordless","FIDO2"],"photo-credits":null,"applaud-link":"2021/spring-boot-stream-kafka.json","date":"2023-04-20T00:00:00.000Z","draft":false,"summary":"In this article, we will explore how we can implement FIDO2 passwordless authentication using Keycloak.","imageUrl":"/static/images/2023/fido2-passwordless-auth-with-keycloak-implementation/cover.jpg","actualUrl":"2023/setup-fido2-passwordless-authentication-with-keycloak","customUrl":"setup-fido2-passwordless-authentication-with-keycloak","youtubeLink":"https://www.youtube.com/embed/VAP4mc6R1Do","slug":"setup-fido2-passwordless-authentication-with-keycloak"}},"__N_SSG":true}