{"pageProps":{"post":{"mdxSource":"var Component=(()=>{var h=Object.create;var c=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var k=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var o=s=>c(s,\"__esModule\",{value:!0});var g=(s,a)=>()=>(a||s((a={exports:{}}).exports,a),a.exports),w=(s,a)=>{o(s);for(var i in a)c(s,i,{get:a[i],enumerable:!0})},y=(s,a,i)=>{if(a&&typeof a==\"object\"||typeof a==\"function\")for(let n of u(a))!N.call(s,n)&&n!==\"default\"&&c(s,n,{get:()=>a[n],enumerable:!(i=m(a,n))||i.enumerable});return s},f=s=>y(o(c(s!=null?h(k(s)):{},\"default\",s&&s.__esModule&&\"default\"in s?{get:()=>s.default,enumerable:!0}:{value:s,enumerable:!0})),s);var d=g((H,r)=>{r.exports=_jsx_runtime});var A={};w(A,{default:()=>S,frontmatter:()=>b});var e=f(d()),b={title:\"Setup Local Voice Assistant In Home Assistant Using USB Microphone - Docker Containers Setup\\xA0Guide\",author:\"Amrut Prabhu\",categories:\"\",tags:[\"Wake Word\",\"USB Microphone\",\"Voice Assistant\",\"Home Assistant\"],\"photo-credits\":null,\"applaud-link\":\"2021/spring-boot-stream-kafka.json\",date:\"2023-10-23\",draft:!1,summary:\" This article will look at how you can set up voice assistance with Home Assistant and invoke Home Assistant devices using a USB microphone.\",imageUrl:\"/static/images/2023/voice-home-assistant-usb-microphone/cover.jpg\",actualUrl:\"auto-generated\",customUrl:\"auto-generated\",youtubeLink:\"https://www.youtube.com/embed/8uW3RfC7oVo\"};function v(s={}){let{wrapper:a}=s.components||{};return a?(0,e.jsx)(a,Object.assign({},s,{children:(0,e.jsx)(i,{})})):i();function i(){let n=Object.assign({p:\"p\",h2:\"h2\",a:\"a\",span:\"span\",ol:\"ol\",li:\"li\",br:\"br\",ul:\"ul\",strong:\"strong\",img:\"img\",code:\"code\",pre:\"pre\",div:\"div\"},s.components),{TOCInline:l,Image:t}=n;return t||p(\"Image\",!0),l||p(\"TOCInline\",!0),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.p,{children:\"This article will look at how you can set up voice assistance with Home Assistant and invoke Home Assistant devices using a USB microphone.\"}),`\n`,(0,e.jsx)(l,{toc:s.toc,asDisclosure:!0}),`\n`,(0,e.jsxs)(n.h2,{id:\"requirements\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#requirements\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Requirements\"]}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[\"Home Assistant up and running.\",(0,e.jsx)(n.br,{}),`\n`,\"You can check \",(0,e.jsx)(n.a,{href:\"https://smarthomecircle.com/connect-wifi-on-home-assistant-on-startup\",children:\"this\"}),\" link to see how you can install it for the first time\"]}),`\n`,(0,e.jsxs)(n.li,{children:[\"USB Microphone\",(0,e.jsx)(n.br,{}),`\n`,\"For Example\",`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.a,{href:\"https://amzn.to/402lMXB\",children:(0,e.jsx)(n.strong,{children:\"Amazon - Razon Mini\"})}),`\n`,(0,e.jsx)(n.a,{href:\"https://amzn.to/402lMXB\",children:(0,e.jsx)(n.img,{src:\"/static/images/2023/voice-home-assistant-usb-microphone/microphone.jpg\",alt:\"Razon Mini\"})})]}),`\n`]}),`\n`]}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"To set up voice assistant, we would need three components to create the voice assist pipeline in Home Assistant.\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"Whisper\"}),\": For speech-to-text\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"Piper:\"}),\" For text-to-speech\"]}),`\n`,(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"OpenWakeWord:\"}),\" For invoking the Assist Pipeline\"]}),`\n`]}),`\n`,(0,e.jsxs)(n.h2,{id:\"important-note\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#important-note\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Important Note\"]}),`\n`,(0,e.jsx)(n.p,{children:\"If you are new to docker, this setup can be overwhelming. I would recommend to use Home Assistant OS and install addons instead. Here is the video for the entire setup.\"}),`\n`,(0,e.jsx)(\"iframe\",{id:\"video\",className:\"w-full aspect-video\",src:\"https://www.youtube.com/embed/P4V2JqCmk7M\",frameBorder:\"0\",allow:\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\",allowFullScreen:!0}),`\n`,(0,e.jsx)(\"br\",{}),`\n`,(0,e.jsx)(n.p,{children:\"In case you want to set it up using Docker, then continue with the next steps.\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"run-whisper-piper-and-openwakeword-with-docker\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#run-whisper-piper-and-openwakeword-with-docker\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Run Whisper, Piper, and OpenWakeWord with Docker\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Create a \",(0,e.jsx)(n.code,{children:\"docker-compose.yaml\"}),\" file with the following content\"]}),`\n`,(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"language-yaml code-highlight\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"services\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"openwakeword\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"image\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" homeassistant/amd64\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"addon\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"openwakeword\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`latest  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"container_name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` openwakeword  \n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`  \n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"entrypoint\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` python3  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"command\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"}),(0,e.jsx)(n.span,{className:\"token scalar string\",children:`  \n`})]}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token scalar string\",children:`      -m wyoming_openwakeword  \n`})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token scalar string\",children:`      --uri 'tcp://0.0.0.0:10400'  \n`})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token scalar string\",children:`      --preload-model 'ok_nabu'  \n`})}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token scalar string\",children:\"      --custom-model-dir /share/openwakeword  \"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"ports\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" 10400\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"10400\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"environment\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` TZ=Europe/Berlin  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"volumes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" ./openwakeword\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"data\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`/data  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" ./openwakeword\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"custom\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"model\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"dir\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`/share/openwakeword  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"restart\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" unless\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`stopped  \n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`  \n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"#-------------------------------------  \"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"piper\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"image\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" homeassistant/amd64\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"addon\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"piper\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`latest  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"container_name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` piper  \n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`  \n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"entrypoint\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` python3  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"command\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"}),(0,e.jsx)(n.span,{className:\"token scalar string\",children:`  \n`})]}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token scalar string\",children:`        -m wyoming_piper  \n`})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token scalar string\",children:`        --piper '/usr/share/piper/piper'  \n`})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token scalar string\",children:`        --uri 'tcp://0.0.0.0:10200'  \n`})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token scalar string\",children:`        --length-scale \"1\"  \n`})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token scalar string\",children:`        --noise-scale \"0.667\"  \n`})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token scalar string\",children:`        --speaker \"0\"  \n`})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token scalar string\",children:`        --voice \"en_US-lessac-medium\"  \n`})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token scalar string\",children:`        --max-piper-procs \"1\"  \n`})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token scalar string\",children:`        --data-dir /data  \n`})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token scalar string\",children:`        --data-dir /share/piper  \n`})}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token scalar string\",children:\"        --download-dir /data  \"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"ports\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"10200:10200\"'}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"volumes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" ./piper\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"data\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`/data  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"restart\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" unless\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`stopped  \n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`  \n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"#----------------------------------------  \"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"whisper\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"image\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" homeassistant/amd64\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"addon\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"whisper\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`latest  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"container_name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` whisper  \n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`  \n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"entrypoint\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` python3  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"command\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\">\"}),(0,e.jsx)(n.span,{className:\"token scalar string\",children:`  \n`})]}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token scalar string\",children:`      -m wyoming_faster_whisper  \n`})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token scalar string\",children:`      --uri tcp://0.0.0.0:10300  \n`})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token scalar string\",children:`      --model small-int8  \n`})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token scalar string\",children:`      --beam-size 1  \n`})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token scalar string\",children:`      --language en  \n`})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token scalar string\",children:`      --data-dir /data  \n`})}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token scalar string\",children:\"      --download-dir /data  \"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"ports\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"10300:10300\"'}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"environment\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` TZ=Europe/Berlin  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"volumes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" ./whisper\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"data\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`/data  \n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token key atrule\",children:\"restart\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" unless\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`stopped\n`]})]})}),`\n`,(0,e.jsx)(n.p,{children:\"This docker compose file, contains all three docker containers.\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"You can now start all the containers using \",(0,e.jsx)(n.code,{children:\"docker compose up\"}),\".\"]}),`\n`,(0,e.jsxs)(n.h2,{id:\"setup-piper-whisper-and-openwakeword-with-home-assistant\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#setup-piper-whisper-and-openwakeword-with-home-assistant\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Setup Piper, Whisper, and OpenWakeWord with Home Assistant\"]}),`\n`,(0,e.jsx)(n.p,{children:\"After starting the containers, you need to connect them to Home Assistant\"}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"Step 1\"}),\": Click on Home Assistant settings on the Left panel\"]}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"Step 2\"}),\": Click on \\u201CDevices & Services\\u201D\"]}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"Step 3\"}),\": Click on \\u201CAdd Integration\\u201D from the bottom right-hand corner.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"Step 4\"}),\": Search \\u201CWyoming Protocol\\u201D\"]}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(t,{alt:\"wyoming-protocol\",src:\"/static/images/2023/voice-home-assistant-usb-microphone/wyoming-protocol.webp\",width:\"1246\",height:\"464\"})}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"Step 5\"}),\": Specify the IP address of your machine where you are running your docker-compose file.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"Step 6\"}),': Add the port number \\u201C10400\" to set up OpenWakeWord and click submit.']}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(t,{alt:\"wakewordsetup-port\",src:\"/static/images/2023/voice-home-assistant-usb-microphone/wakewordsetup-port.webp\",width:\"1352\",height:\"716\"})}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"Step 7\"}),\": Repeat steps 4 to 6 for Piper setup with port \\u201C10200\\u201D and Whisper with port \\u201C10300\\u201D.\"]}),`\n`,(0,e.jsx)(n.p,{children:\"With this, you have now set up the connection with Home Assistant.\"}),`\n`,(0,e.jsx)(n.p,{children:\"Now, let\\u2019s set up the Assist Pipeline.\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"setup-assist-pipeline-for-voice-assistance\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#setup-assist-pipeline-for-voice-assistance\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Setup Assist Pipeline for Voice Assistance\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Let\\u2019s set up the Assist Pipeline\"}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"Step 1\"}),\": Click on Home Assistant settings on the Left panel\"]}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"Step 2\"}),\": Click on \\u201CVoice Assistants\\u201D\"]}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"Step 3\"}),\": Click on the default pipeline\"]}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(t,{alt:\"assist-pipeline\",src:\"/static/images/2023/voice-home-assistant-usb-microphone/assist-pipeline.webp\",width:\"1826\",height:\"616\"})}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"Step 4\"}),\": Setup \\u201CSpeech to text\\u201D\"]}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(t,{alt:\"speech-to-text\",src:\"/static/images/2023/voice-home-assistant-usb-microphone/speech-to-text.webp\",width:\"1352\",height:\"558\"})}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"Step 5\"}),\": Setup \\u201CText to Speech\\u201D\"]}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(t,{alt:\"text-to-speech\",src:\"/static/images/2023/voice-home-assistant-usb-microphone/text-to-speech.webp\",width:\"1872\",height:\"570\"})}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"Step 6\"}),\": Finally set up \\u201CWake Word\\u201D and click submit.\"]}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(t,{alt:\"wake word\",src:\"/static/images/2023/voice-home-assistant-usb-microphone/wake-word.webp\",width:\"1326\",height:\"440\"})}),`\n`,(0,e.jsx)(n.p,{children:\"With this, we just set up our voice Assist Pipeline.\"}),`\n`,(0,e.jsx)(n.p,{children:\"Now the last piece required is the USB Microphone\"}),`\n`,(0,e.jsxs)(n.h2,{id:\"setup-usb-microphone-in-home-assistant-os\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#setup-usb-microphone-in-home-assistant-os\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Setup USB Microphone In Home Assistant OS\"]}),`\n`,(0,e.jsx)(n.p,{children:\"To set up a USB microphone to invoke the Assist Pipeline, you will need to install an \\u201CAssist Microphone\\u201D addon.\"}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"Step 1\"}),\": Click on Home Assistant settings on the Left panel\"]}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"Step 2\"}),\": Click on \\u201CAddons\\u201D\"]}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"Step 3\"}),\": Search and install the \\u201CAssist Microphone\\u201D addon\"]}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"Step 4\"}),\": Click on the configuration tab on the \\u201CAssist Microphone\\u201D addon page.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"Step 5\"}),\": Create and Set the Home Assistant token. You can generate one from your profile.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"Step 6\"}),\": Scroll down to Audio and select the input. In this case, the microphone you connected to Home Assistant.\"]}),`\n`,(0,e.jsx)(n.div,{children:(0,e.jsx)(t,{alt:\"microphone-setup\",src:\"/static/images/2023/voice-home-assistant-usb-microphone/microphone-setup.webp\",width:\"1478\",height:\"594\"})}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"Step 7\"}),\": Make sure to click on save for both the configurations you set in steps 5 and 6.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"Step 8\"}),\": Go to the info tab and start the \\u201CAssist Microphone\\u201D addon.\"]}),`\n`,(0,e.jsx)(n.p,{children:\"With this, you have just configured your USB microphone to be used by the Assist Pipeline.\"}),`\n`,(0,e.jsx)(n.p,{children:\"You can now invoke the Home Assistant using your selected wake word.\"}),`\n`,(0,e.jsx)(n.p,{children:\"If you are interested in exploring more of such easy to follow step by step guides about Home Assistant, then here are a few suggestions\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://smarthomecircle.com/install-zigbee2mqtt-with-home-assistant\",children:(0,e.jsx)(n.strong,{children:\"Setup Zigbee2Mqtt with Home Assistant\"})})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://smarthomecircle.com/how-to-connect-led-strip-with-home-assistant-using-wled\",children:(0,e.jsx)(n.strong,{children:\"Control LED Strip with Home Assistant\\u200AUsing WLED\"})})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://smarthomecircle.com/add-matter-devices-to-home-assistant\",children:(0,e.jsx)(n.strong,{children:\"How I Added a Matter Device to Home Assistant\"})})}),`\n`]})]})}}var S=v;function p(s,a){throw new Error(\"Expected \"+(a?\"component\":\"object\")+\" `\"+s+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return A;})();\n;return Component;","toc":[{"value":"Requirements","url":"#requirements","depth":2},{"value":"Important Note","url":"#important-note","depth":2},{"value":"Run Whisper, Piper, and OpenWakeWord with Docker","url":"#run-whisper-piper-and-openwakeword-with-docker","depth":2},{"value":"Setup Piper, Whisper, and OpenWakeWord with Home Assistant","url":"#setup-piper-whisper-and-openwakeword-with-home-assistant","depth":2},{"value":"Setup Assist Pipeline for Voice Assistance","url":"#setup-assist-pipeline-for-voice-assistance","depth":2},{"value":"Setup USB Microphone In Home Assistant OS","url":"#setup-usb-microphone-in-home-assistant-os","depth":2}],"frontMatter":{"readingTime":{"text":"6 min read","minutes":5.215,"time":312900,"words":1043},"slug":"2023/setup-voice-assistant-with-home-assistant-using-docker-usb-microphone","fileName":"2023/setup-voice-assistant-with-home-assistant-using-docker-usb-microphone.md","title":"Setup Local Voice Assistant In Home Assistant Using USB Microphone - Docker Containers Setup Guide","author":"Amrut Prabhu","categories":"","tags":["Wake Word","USB Microphone","Voice Assistant","Home Assistant"],"photo-credits":null,"applaud-link":"2021/spring-boot-stream-kafka.json","date":"2023-10-23T00:00:00.000Z","draft":false,"summary":" This article will look at how you can set up voice assistance with Home Assistant and invoke Home Assistant devices using a USB microphone.","imageUrl":"/static/images/2023/voice-home-assistant-usb-microphone/cover.jpg","actualUrl":"2023/setup-voice-assistant-with-home-assistant-using-docker-usb-microphone","customUrl":"setup-voice-assistant-with-home-assistant-using-docker-usb-microphone","youtubeLink":"https://www.youtube.com/embed/8uW3RfC7oVo"}},"authorDetails":[{"readingTime":{"text":"1 min read","minutes":0.74,"time":44400,"words":148},"slug":["default"],"fileName":"default.md","name":"Amrut Prabhu","avatar":"/static/images/avatar-small.jpg","avatarBig":"/static/images/avatar-big.jpg","occupation":"","company":"","email":"SmartHomeCircle@gmail.com","twitter":"https://twitter.com/amrutprabhu42","linkedin":"","github":"","youtube":"https://www.youtube.com/@SmartHomeCircle","customUrl":"default","actualUrl":"default","date":null}],"prev":{"title":"How to Control LED Strip with Home Assistant Using WLED — Step-By-Step Guide","author":"Amrut Prabhu","categories":"","tags":["WLED","LED lights","LED strip","Home Assistant"],"photo-credits":null,"applaud-link":"2021/spring-boot-stream-kafka.json","date":"2023-10-12T00:00:00.000Z","draft":false,"summary":"In this article, we will look at how you can control an LED strip with Home Assistant using WLED.","imageUrl":"/static/images/2023/wled-with-home-assistant/cover.jpg","actualUrl":"2023/how-to-connect-led-strip-with-home-assistant-using-wled","customUrl":"how-to-connect-led-strip-with-home-assistant-using-wled","youtubeLink":"https://www.youtube.com/embed/eFPBkX-jPag","slug":"how-to-connect-led-strip-with-home-assistant-using-wled"},"next":null},"__N_SSG":true}