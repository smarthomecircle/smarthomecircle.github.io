{"pageProps":{"post":{"mdxSource":"var Component=(()=>{var o=Object.create;var a=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,m=Object.prototype.hasOwnProperty;var l=t=>a(t,\"__esModule\",{value:!0});var g=(t,r)=>()=>(r||t((r={exports:{}}).exports,r),r.exports),b=(t,r)=>{l(t);for(var i in r)a(t,i,{get:r[i],enumerable:!0})},f=(t,r,i)=>{if(r&&typeof r==\"object\"||typeof r==\"function\")for(let n of p(r))!m.call(t,n)&&n!==\"default\"&&a(t,n,{get:()=>r[n],enumerable:!(i=d(r,n))||i.enumerable});return t},k=t=>f(l(a(t!=null?o(u(t)):{},\"default\",t&&t.__esModule&&\"default\"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var s=g((z,h)=>{h.exports=_jsx_runtime});var R={};b(R,{default:()=>S,frontmatter:()=>y});var e=k(s()),y={title:\"3 Backup Strategies for My Raspberry Pi 5 NAS with RAID 5\",author:\"Amrut Prabhu\",categories:\"\",tags:[\"Raspberry Pi\",\"NAS\",\"Open Media Vault\",\"Radxa\",\"Raspberry Pi HAT\"],\"photo-credits\":null,\"applaud-link\":\"2021/spring-boot-stream-kafka.json\",date:\"2025-01-12\",draft:!1,summary:\"Unleash Raspberry Pi Compute Module 5: compact, versatile mini-computer for high-speed storage, DIY NAS, and innovative projects.\",imageUrl:\"/static/images/2024/raspberrypi-cm5/cover.webp\",actualUrl:\"auto-generated\",customUrl:\"auto-generated\",youtubeLink:\"https://www.youtube.com/embed/7N2VnqQcOHk\"};function A(t={}){let{wrapper:r}=t.components||{};return r?(0,e.jsx)(r,Object.assign({},t,{children:(0,e.jsx)(i,{})})):i();function i(){let n=Object.assign({p:\"p\",a:\"a\",h3:\"h3\",span:\"span\",ul:\"ul\",li:\"li\",strong:\"strong\",table:\"table\",thead:\"thead\",tr:\"tr\",th:\"th\",img:\"img\",ol:\"ol\",code:\"code\"},t.components),{TOCInline:c}=n;return c||D(\"TOCInline\",!0),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(c,{toc:t.toc,asDisclosure:!0}),`\n`,(0,e.jsxs)(n.p,{children:[\"A few months ago, I built a Raspberry Pi 5 NAS with RAID 5 using the \",(0,e.jsx)(n.a,{href:\"https://s.click.aliexpress.com/e/_olCRd9p\",children:\"Penta SATA HAT\"}),\" from Radxa. While it\\u2019s been a reliable setup, I wanted to enhance the data reliability. In this guide, I\\u2019ll walk you through three backup strategies I\\u2019ve implemented for my Raspberry Pi 5 NAS, and I\\u2019ll also discuss the energy consumption changes resulting from these updates.\"]}),`\n`,(0,e.jsxs)(n.h3,{id:\"upgrading-the-hardware\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#upgrading-the-hardware\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Upgrading the Hardware\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Before diving into the strategies, I made some significant hardware upgrades:\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"Added a 120GB SSD\"}),\" for the OS, replacing the SD card on the Pi 5.\"]}),`\n`,(0,e.jsx)(n.table,{children:(0,e.jsx)(n.thead,{children:(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.th,{children:(0,e.jsx)(n.img,{src:\"/static/images/2025/backup-strategies/ssd.jpg\",alt:\"Alt text\"})}),(0,e.jsxs)(n.th,{children:[\"- Amazon EU : \",(0,e.jsx)(n.a,{href:\"https://amzn.to/3VU6T8Q\",children:\"https://amzn.to/3VU6T8Q\"}),\" \",(0,e.jsx)(\"br\",{}),\"- Amazon US : \",(0,e.jsx)(n.a,{href:\"https://amzn.to/4gKmeRC\",children:\"https://amzn.to/4gKmeRC\"})]})]})})}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"Installed a 4TB HDD\"}),\" as secondary storage for backups.\"]}),`\n`,(0,e.jsx)(n.table,{children:(0,e.jsx)(n.thead,{children:(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.th,{children:(0,e.jsx)(n.img,{src:\"/static/images/2025/backup-strategies/hdd.jpg\",alt:\"HDD Drives\"})}),(0,e.jsxs)(n.th,{children:[\"- Amazon EU : \",(0,e.jsx)(n.a,{href:\"https://amzn.to/3ZN5To0\",children:\"https://amzn.to/3ZN5To0\"}),\" \",(0,e.jsx)(\"br\",{}),\"- Amazon US : \",(0,e.jsx)(n.a,{href:\"https://amzn.to/3ZXRqFQ\",children:\"https://amzn.to/3ZXRqFQ\"})]})]})})}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"Organized the components into a compact and efficient rack setup using an Acrylic HDD Mount rack.\"}),`\n`,(0,e.jsx)(n.table,{children:(0,e.jsx)(n.thead,{children:(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.th,{children:(0,e.jsx)(n.img,{src:\"/static/images/2025/backup-strategies/case.jpg\",alt:\"Acrylic Rack\"})}),(0,e.jsxs)(n.th,{children:[\"- Amazon EU: \",(0,e.jsx)(n.a,{href:\"https://amzn.to/3BuOMPY\",children:\"https://amzn.to/3BuOMPY\"}),\" \",(0,e.jsx)(\"br\",{}),\"- Amazon US :  \",(0,e.jsx)(n.a,{href:\"https://amzn.to/4iFN3rF\",children:\"https://amzn.to/4iFN3rF\"}),\"  \",(0,e.jsx)(\"br\",{}),\"- AliExpress : \",(0,e.jsx)(n.a,{href:\"https://s.click.aliexpress.com/e/_olEubxz\",children:\"https://s.click.aliexpress.com/e/_olEubxz\"})]})]})})}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"USB to SATA connector\"}),`\n`,(0,e.jsx)(n.table,{children:(0,e.jsx)(n.thead,{children:(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.th,{children:(0,e.jsx)(n.img,{src:\"/static/images/2025/backup-strategies/usb-sata.jpg\",alt:\"Acrylic Rack\"})}),(0,e.jsxs)(n.th,{children:[\"- Amazon EU: \",(0,e.jsx)(n.a,{href:\"https://amzn.to/41ZiW8y\",children:\"https://amzn.to/41ZiW8y\"}),\" \",(0,e.jsx)(\"br\",{}),\"- Amazon US :  \",(0,e.jsx)(n.a,{href:\"https://amzn.to/3VS6uDJ\",children:\"https://amzn.to/3VS6uDJ\"}),\"  \",(0,e.jsx)(\"br\",{}),\"- AliExpress : \",(0,e.jsx)(n.a,{href:\"https://s.click.aliexpress.com/e/_oFQ4SfZ\",children:\"https://s.click.aliexpress.com/e/_oFQ4SfZ\"})]})]})})}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"eSATA cable for 3.5 inch HDD with 12v pins.\"}),`\n`,(0,e.jsx)(n.table,{children:(0,e.jsx)(n.thead,{children:(0,e.jsxs)(n.tr,{children:[(0,e.jsx)(n.th,{children:(0,e.jsx)(n.img,{src:\"/static/images/2025/backup-strategies/esata.jpg\",alt:\"Acrylic Rack\"})}),(0,e.jsxs)(n.th,{children:[\"- Amazon EU: \",(0,e.jsx)(n.a,{href:\"https://amzn.to/3Dsq2Z5\",children:\"https://amzn.to/3Dsq2Z5\"}),\" \",(0,e.jsx)(\"br\",{}),\"- Amazon US :  \",(0,e.jsx)(n.a,{href:\"https://amzn.to/41RZWsz\",children:\"https://amzn.to/41RZWsz\"}),\"  \",(0,e.jsx)(\"br\",{}),\"- AliExpress : \",(0,e.jsx)(n.a,{href:\"https://s.click.aliexpress.com/e/_ok7mfCB\",children:\"https://s.click.aliexpress.com/e/_ok7mfCB\"})]})]})})}),`\n`]}),`\n`]}),`\n`,(0,e.jsxs)(n.h3,{id:\"backup-strategy-1-nas-os-backup-to-the-nas\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#backup-strategy-1-nas-os-backup-to-the-nas\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Backup Strategy 1: NAS OS Backup To The NAS\"]}),`\n`,(0,e.jsx)(n.p,{children:\"First, I configured a system backup to safeguard the NAS OS:\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.strong,{children:\"OMV Backup Plugin:\"})}),`\n`]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"Installed the OMV Backup plugin in OpenMediaVault.\"}),`\n`,(0,e.jsxs)(n.li,{children:[\"Configured the plugin to:\",`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"Save backups to the RAID 5 shared folder.\"}),`\n`,(0,e.jsx)(n.li,{children:\"Use the DD command for a full disk backup.\"}),`\n`,(0,e.jsx)(n.li,{children:\"Retain up to five copies.\"}),`\n`]}),`\n`]}),`\n`]}),`\n`,(0,e.jsxs)(n.ol,{start:\"2\",children:[`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.strong,{children:\"Scheduling:\"})}),`\n`]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"Scheduled daily backups at 1:30 AM.\"}),`\n`]}),`\n`,(0,e.jsxs)(n.ol,{start:\"3\",children:[`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.strong,{children:\"Restoring the OS:\"})}),`\n`]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"Extracted the backup file to a PC.\"}),`\n`,(0,e.jsx)(n.li,{children:\"Used the DD command to flash the backup onto the SSD.\"}),`\n`]}),`\n`,(0,e.jsxs)(n.ol,{start:\"4\",children:[`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.strong,{children:\"Booting From USB Storage\"})}),`\n`]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[\"Mount the USB storage and open the \",(0,e.jsx)(n.code,{children:\"BootFS\"}),\" partition\"]}),`\n`,(0,e.jsxs)(n.li,{children:[\"Update the \",(0,e.jsx)(n.code,{children:\"config.txt\"}),\" file to enable USB boot by adding \",(0,e.jsx)(n.code,{children:\"usb_max_current_enable=1\"})]}),`\n`,(0,e.jsx)(n.li,{children:\"Conenct the SSD to the Pi 5 via the USB-to-SATA connector and turn on the Pi 5.\"}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"This strategy ensures I can quickly restore the NAS OS in case of SD card failure.\"}),`\n`,(0,e.jsxs)(n.h3,{id:\"backup-strategy-2-nas-data-backup-to-local-hdd\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#backup-strategy-2-nas-data-backup-to-local-hdd\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Backup Strategy 2: NAS Data Backup to Local HDD\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Next, I implemented local data backup using the 4TB HDD:\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.strong,{children:\"Drive Setup:\"})}),`\n`]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"Formatted the HDD with the EXT4 file system.\"}),`\n`,(0,e.jsxs)(n.li,{children:[\"Created and mounted a shared folder named \",(0,e.jsx)(n.code,{children:\"backup\"}),\" on the HDD.\"]}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"2. Rsync Configuration:\"})}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[\"Created an Rsync task in OpenMediaVault:\",`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"Source: RAID 5 shared folder.\"}),`\n`,(0,e.jsx)(n.li,{children:\"Destination: 4TB HDD backup folder.\"}),`\n`,(0,e.jsx)(n.li,{children:\"Schedule: Daily at 2:00 AM.\"}),`\n`]}),`\n`]}),`\n`,(0,e.jsx)(n.li,{children:\"Enabled options to preserve ACLs and synchronize deletions.\"}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"This strategy provides an on-site backup of the RAID 5 data.\"}),`\n`,(0,e.jsxs)(n.h3,{id:\"backup-strategy-3-remote-backup-to-another-nas\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#backup-strategy-3-remote-backup-to-another-nas\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Backup Strategy 3: Remote Backup to Another NAS\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Lastly, I set up remote backups to a second NAS:\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.strong,{children:\"Remote NAS Setup:\"})}),`\n`]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"Configured the remote NAS (CM5 NAS) with RAID 5.\"}),`\n`,(0,e.jsxs)(n.li,{children:[\"Enabled Rsync server and created a module named \",(0,e.jsx)(n.code,{children:\"backup\"}),\".\"]}),`\n`]}),`\n`,(0,e.jsxs)(n.ol,{start:\"2\",children:[`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.strong,{children:\"Rsync Task on Raspberry Pi 5 NAS:\"})}),`\n`]}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsxs)(n.li,{children:[\"Configured an Rsync task:\",`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:\"Type: Remote (Push).\"}),`\n`,(0,e.jsx)(n.li,{children:\"Source: RAID 5 shared folder on PiFi NAS.\"}),`\n`,(0,e.jsxs)(n.li,{children:[\"Destination: \",(0,e.jsx)(n.code,{children:\"backup\"}),\" module on the remote NAS.\"]}),`\n`,(0,e.jsx)(n.li,{children:\"Schedule: Daily at 3:15 AM.\"}),`\n`]}),`\n`]}),`\n`,(0,e.jsx)(n.li,{children:\"Enabled options to preserve ACLs and synchronize deletions.\"}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"This strategy ensures off-site redundancy, enhancing data security in case of physical damage to the primary NAS.\"}),`\n`,(0,e.jsxs)(n.h3,{id:\"conclusion\",children:[(0,e.jsx)(n.a,{\"aria-hidden\":\"true\",tabIndex:\"-1\",href:\"#conclusion\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Conclusion\"]}),`\n`,(0,e.jsx)(n.p,{children:\"By implementing these three strategies, I\\u2019ve significantly improved the reliability and security of my Raspberry Pi 5 NAS:\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsx)(n.li,{children:\"Backups of the OS ensure rapid recovery from system failures.\"}),`\n`,(0,e.jsx)(n.li,{children:\"Local HDD backups protect against RAID 5 data corruption.\"}),`\n`,(0,e.jsx)(n.li,{children:\"Remote backups safeguard against physical damage to the primary NAS.\"}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"These strategies have provided peace of mind and a robust system for my video editing workflow. If you\\u2019re considering similar upgrades or have questions, feel free to reach out!\"}),`\n`,(0,e.jsxs)(n.ul,{children:[`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://smarthomecircle.com/radxa-x4-alternative-to-raspberry-pi-5\",children:(0,e.jsx)(n.strong,{children:\"Radxa X4: 60$ Powerful Atlernative to Raspberry Pi 5\"})})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://smarthomecircle.com/create-nas-with-raspberry-pi-5\",children:(0,e.jsx)(n.strong,{children:\"Create a NAS with Raspberry Pi 5\"})})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://smarthomecircle.com/How-I-created-my-voice-assistant-with-on-device-wake-word-using-home-assistant\",children:(0,e.jsx)(n.strong,{children:\"Created My Voice Assistant With On-Device Wake Word Detection On ESP32\"})})}),`\n`,(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://smarthomecircle.com/Orange-pi-5-max-a-powerful-successor-to-orange-pi-5-pro\",children:(0,e.jsx)(n.strong,{children:\"Orange Pi 5 MAX: A Powerful Successor to the Orange Pi 5 Pro\"})})}),`\n`]})]})}}var S=A;function D(t,r){throw new Error(\"Expected \"+(r?\"component\":\"object\")+\" `\"+t+\"` to be defined: you likely forgot to import, pass, or provide it.\")}return R;})();\n;return Component;","toc":[{"value":"Upgrading the Hardware","url":"#upgrading-the-hardware","depth":3},{"value":"Backup Strategy 1: NAS OS Backup To The NAS","url":"#backup-strategy-1-nas-os-backup-to-the-nas","depth":3},{"value":"Backup Strategy 2: NAS Data Backup to Local HDD","url":"#backup-strategy-2-nas-data-backup-to-local-hdd","depth":3},{"value":"Backup Strategy 3: Remote Backup to Another NAS","url":"#backup-strategy-3-remote-backup-to-another-nas","depth":3},{"value":"Conclusion","url":"#conclusion","depth":3}],"frontMatter":{"readingTime":{"text":"4 min read","minutes":3.875,"time":232500,"words":775},"slug":"2025/3-backup-strategies-for-raspberrypi-nas","fileName":"2025/3-backup-strategies-for-raspberrypi-nas.md","title":"3 Backup Strategies for My Raspberry Pi 5 NAS with RAID 5","author":"Amrut Prabhu","categories":"","tags":["Raspberry Pi","NAS","Open Media Vault","Radxa","Raspberry Pi HAT"],"photo-credits":null,"applaud-link":"2021/spring-boot-stream-kafka.json","date":"2025-01-12T00:00:00.000Z","draft":false,"summary":"Unleash Raspberry Pi Compute Module 5: compact, versatile mini-computer for high-speed storage, DIY NAS, and innovative projects.","imageUrl":"/static/images/2024/raspberrypi-cm5/cover.webp","actualUrl":"2025/3-backup-strategies-for-raspberrypi-nas","customUrl":"3-backup-strategies-for-raspberrypi-nas","youtubeLink":"https://www.youtube.com/embed/7N2VnqQcOHk"}},"authorDetails":[{"readingTime":{"text":"2 min read","minutes":1.045,"time":62700,"words":209},"slug":["default"],"fileName":"default.md","name":"Amrut Prabhu","avatar":"/static/images/avatar-small.jpg","avatarBig":"/static/images/avatar-big.jpg","occupation":"","company":"","email":"contactsmarthomecircle@gmail.com","twitter":"https://twitter.com/smarthomecircle","linkedin":"","github":"","youtube":"https://www.youtube.com/@SmartHomeCircle","customUrl":"default","actualUrl":"default","date":null}],"prev":{"title":"How to Install OS on Raspberry Pi Compute Module 5 with eMMC Storage","author":"Amrut Prabhu","categories":"","tags":["Raspberry Pi","CM5","Compute Module","Compute Module 5","SBC","Linux"],"photo-credits":null,"applaud-link":"2021/spring-boot-stream-kafka.json","date":"2024-12-19T00:00:00.000Z","draft":false,"summary":"Step by step guide to install Raspberry Pi OS on Raspberry Pi Compute Module 5 with eMMC Storage ","imageUrl":"/static/images/2024/os-cm5-emmc/cover.webp","actualUrl":"2024/how-to-install-os-on-raspberry-pi-compute-module-5-emmc-storage","customUrl":"how-to-install-os-on-raspberry-pi-compute-module-5-emmc-storage","youtubeLink":"https://www.youtube.com/embed/SWv-WYlHJWQ","slug":"how-to-install-os-on-raspberry-pi-compute-module-5-emmc-storage"},"next":{"title":"Raspberry Pi Compute Module 5: Performance, Testing, and Potential","author":"Amrut Prabhu","categories":"","tags":["Raspberry Pi","CM5","Compute Module","Compute Module 5","SBC","Linux"],"photo-credits":null,"applaud-link":"2021/spring-boot-stream-kafka.json","date":"2025-03-12T00:00:00.000Z","draft":false,"summary":"Unleash Raspberry Pi Compute Module 5: compact, versatile mini-computer for high-speed storage, DIY NAS, and innovative projects.","imageUrl":"/static/images/2024/raspberrypi-cm5/cover.webp","actualUrl":"2025/raspberry-pi-compute-module-5-review","customUrl":"raspberry-pi-compute-module-5-review","youtubeLink":"https://www.youtube.com/embed/4m7v72YCzm4","slug":"raspberry-pi-compute-module-5-review"}},"__N_SSG":true}